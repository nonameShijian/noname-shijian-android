{"version":3,"file":"StepView.js","sourceRoot":"","sources":["../../../../../../../front_end/panels/recorder/components/StepView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as Menus from '../../../ui/components/menus/menus.js';\n\nimport type * as Converters from '../converters/converters.js';\nimport * as Models from '../models/models.js';\n\nimport stepViewStyles from './stepView.css.js';\n\nimport {type StepEditedEvent} from './StepEditor.js';\n\nimport {\n  TimelineSection,\n  type TimelineSectionData,\n} from './TimelineSection.js';\n\nconst UIStrings = {\n  /**\n   *@description Title for the step type that configures the viewport\n   */\n  setViewportClickTitle: 'Set viewport',\n  /**\n   *@description Title for the customStep step type\n   */\n  customStepTitle: 'Custom step',\n  /**\n   *@description Title for the click step type\n   */\n  clickStepTitle: 'Click',\n  /**\n   *@description Title for the double click step type\n   */\n  doubleClickStepTitle: 'Double click',\n  /**\n   *@description Title for the hover step type\n   */\n  hoverStepTitle: 'Hover',\n  /**\n   *@description Title for the emulateNetworkConditions step type\n   */\n  emulateNetworkConditionsStepTitle: 'Emulate network conditions',\n  /**\n   *@description Title for the change step type\n   */\n  changeStepTitle: 'Change',\n  /**\n   *@description Title for the close step type\n   */\n  closeStepTitle: 'Close',\n  /**\n   *@description Title for the scroll step type\n   */\n  scrollStepTitle: 'Scroll',\n  /**\n   *@description Title for the key up step type. `up` refers to the state of the keyboard key: it's released, i.e., up. It does not refer to the down arrow key specifically.\n   */\n  keyUpStepTitle: 'Key up',\n  /**\n   *@description Title for the navigate step type\n   */\n  navigateStepTitle: 'Navigate',\n  /**\n   *@description Title for the key down step type. `down` refers to the state of the keyboard key: it's pressed, i.e., down. It does not refer to the down arrow key specifically.\n   */\n  keyDownStepTitle: 'Key down',\n  /**\n   *@description Title for the waitForElement step type\n   */\n  waitForElementStepTitle: 'Wait for element',\n  /**\n   *@description Title for the waitForExpression step type\n   */\n  waitForExpressionStepTitle: 'Wait for expression',\n  /**\n   *@description Title for elements with role button\n   */\n  elementRoleButton: 'Button',\n  /**\n   *@description Title for elements with role input\n   */\n  elementRoleInput: 'Input',\n  /**\n   *@description Default title for elements without a specific role\n   */\n  elementRoleFallback: 'Element',\n  /**\n   *@description The title of the button in the step's context menu that adds a new step before the current one.\n   */\n  addStepBefore: 'Add step before',\n  /**\n   *@description The title of the button in the step's context menu that adds a new step after the current one.\n   */\n  addStepAfter: 'Add step after',\n  /**\n   *@description The title of the button in the step's context menu that removes the step.\n   */\n  removeStep: 'Remove step',\n  /**\n   *@description The title of the button that open the step's context menu.\n   */\n  openStepActions: 'Open step actions',\n  /**\n   *@description The title of the button in the step's context menu that adds a breakpoint.\n   */\n  addBreakpoint: 'Add breakpoint',\n  /**\n   *@description The title of the button in the step's context menu that removes a breakpoint.\n   */\n  removeBreakpoint: 'Remove breakpoint',\n  /**\n   * @description A menu item item in the context menu that expands another menu which list all\n   * the formats the user can copy the recording as.\n   */\n  copyAs: 'Copy as',\n  /**\n   * @description The title of the menu group that holds actions on recording steps.\n   */\n  stepManagement: 'Manage steps',\n  /**\n   * @description The title of the menu group that holds actions related to breakpoints.\n   */\n  breakpoints: 'Breakpoints',\n};\nconst str_ = i18n.i18n.registerUIStrings(\n    'panels/recorder/components/StepView.ts',\n    UIStrings,\n);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-step-view': StepView;\n  }\n}\n\nexport const enum State {\n  Default = 'default',\n  Success = 'success',\n  Current = 'current',\n  Outstanding = 'outstanding',\n  Error = 'error',\n  Stopped = 'stopped',\n}\n\nexport interface StepViewData {\n  state: State;\n  step?: Models.Schema.Step;\n  section?: Models.Section.Section;\n  error?: Error;\n  hasBreakpoint: boolean;\n  isEndOfGroup: boolean;\n  isStartOfGroup: boolean;\n  isFirstSection: boolean;\n  isLastSection: boolean;\n  stepIndex: number;\n  sectionIndex: number;\n  isRecording: boolean;\n  isPlaying: boolean;\n  removable: boolean;\n  builtInConverters: Converters.Converter.Converter[];\n  extensionConverters: Converters.Converter.Converter[];\n  isSelected: boolean;\n  recorderSettings: Models.RecorderSettings.RecorderSettings;\n}\n\nexport class CaptureSelectorsEvent extends Event {\n  static readonly eventName = 'captureselectors';\n  data: Models.Schema.StepWithSelectors&Partial<Models.Schema.ClickAttributes>;\n\n  constructor(\n      step: Models.Schema.StepWithSelectors&Partial<Models.Schema.ClickAttributes>,\n  ) {\n    super(CaptureSelectorsEvent.eventName, {bubbles: true, composed: true});\n    this.data = step;\n  }\n}\n\nexport class StopSelectorsCaptureEvent extends Event {\n  static readonly eventName = 'stopselectorscapture';\n  constructor() {\n    super(StopSelectorsCaptureEvent.eventName, {\n      bubbles: true,\n      composed: true,\n    });\n  }\n}\n\nexport class CopyStepEvent extends Event {\n  static readonly eventName = 'copystep';\n  step: Models.Schema.Step;\n  constructor(step: Models.Schema.Step) {\n    super(CopyStepEvent.eventName, {bubbles: true, composed: true});\n    this.step = step;\n  }\n}\n\nexport class StepChanged extends Event {\n  static readonly eventName = 'stepchanged';\n  currentStep: Models.Schema.Step;\n  newStep: Models.Schema.Step;\n\n  constructor(currentStep: Models.Schema.Step, newStep: Models.Schema.Step) {\n    super(StepChanged.eventName, {bubbles: true, composed: true});\n    this.currentStep = currentStep;\n    this.newStep = newStep;\n  }\n}\n\nexport const enum AddStepPosition {\n  BEFORE = 'before',\n  AFTER = 'after',\n}\n\nexport class AddStep extends Event {\n  static readonly eventName = 'addstep';\n  position: AddStepPosition;\n  stepOrSection: Models.Schema.Step|Models.Section.Section;\n\n  constructor(\n      stepOrSection: Models.Schema.Step|Models.Section.Section,\n      position: AddStepPosition,\n  ) {\n    super(AddStep.eventName, {bubbles: true, composed: true});\n    this.stepOrSection = stepOrSection;\n    this.position = position;\n  }\n}\n\nexport class RemoveStep extends Event {\n  static readonly eventName = 'removestep';\n  step: Models.Schema.Step;\n\n  constructor(step: Models.Schema.Step) {\n    super(RemoveStep.eventName, {bubbles: true, composed: true});\n    this.step = step;\n  }\n}\n\nexport class AddBreakpointEvent extends Event {\n  static readonly eventName = 'addbreakpoint';\n  index: number;\n\n  constructor(index: number) {\n    super(AddBreakpointEvent.eventName, {bubbles: true, composed: true});\n    this.index = index;\n  }\n}\n\nexport class RemoveBreakpointEvent extends Event {\n  static readonly eventName = 'removebreakpoint';\n  index: number;\n\n  constructor(index: number) {\n    super(RemoveBreakpointEvent.eventName, {bubbles: true, composed: true});\n    this.index = index;\n  }\n}\n\nconst COPY_ACTION_PREFIX = 'copy-step-as-';\n\ntype Action = {\n  id: string,\n  label: string,\n  group: string,\n  groupTitle: string,\n};\n\nexport class StepView extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-step-view`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n\n  #step?: Models.Schema.Step;\n  #section?: Models.Section.Section;\n  #state = State.Default;\n  #error?: Error;\n  #showDetails: boolean = false;\n  #isEndOfGroup: boolean = false;\n  #isStartOfGroup: boolean = false;\n  #stepIndex = 0;\n  #sectionIndex = 0;\n  #isFirstSection: boolean = false;\n  #isLastSection: boolean = false;\n  #isRecording = false;\n  #isPlaying = false;\n  #actionsMenuButton?: Buttons.Button.Button;\n  #actionsMenuExpanded = false;\n  #isVisible = false;\n  #observer: IntersectionObserver = new IntersectionObserver(result => {\n    this.#isVisible = result[0].isIntersecting;\n  });\n  #hasBreakpoint = false;\n  #removable = true;\n  #builtInConverters?: Converters.Converter.Converter[];\n  #extensionConverters?: Converters.Converter.Converter[];\n  #isSelected = false;\n  #recorderSettings?: Models.RecorderSettings.RecorderSettings;\n\n  set data(data: StepViewData) {\n    const prevState = this.#state;\n    this.#step = data.step;\n    this.#section = data.section;\n    this.#state = data.state;\n    this.#error = data.error;\n    this.#isEndOfGroup = data.isEndOfGroup;\n    this.#isStartOfGroup = data.isStartOfGroup;\n    this.#stepIndex = data.stepIndex;\n    this.#sectionIndex = data.sectionIndex;\n    this.#isFirstSection = data.isFirstSection;\n    this.#isLastSection = data.isLastSection;\n    this.#isRecording = data.isRecording;\n    this.#isPlaying = data.isPlaying;\n    this.#hasBreakpoint = data.hasBreakpoint;\n    this.#removable = data.removable;\n    this.#builtInConverters = data.builtInConverters;\n    this.#extensionConverters = data.extensionConverters;\n    this.#isSelected = data.isSelected;\n    this.#recorderSettings = data.recorderSettings;\n\n    this.#render();\n\n    if (this.#state !== prevState && this.#state === 'current' && !this.#isVisible) {\n      this.scrollIntoView();\n    }\n  }\n\n  get step(): Models.Schema.Step|undefined {\n    return this.#step;\n  }\n\n  get section(): Models.Section.Section|undefined {\n    return this.#section;\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [stepViewStyles];\n    this.#observer.observe(this);\n    this.#render();\n  }\n\n  disconnectedCallback(): void {\n    this.#observer.unobserve(this);\n  }\n\n  #toggleShowDetails(): void {\n    this.#showDetails = !this.#showDetails;\n    this.#render();\n  }\n\n  #onToggleShowDetailsKeydown(event: Event): void {\n    const keyboardEvent = event as KeyboardEvent;\n    if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n      this.#toggleShowDetails();\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n\n  #getStepTypeTitle(): string|LitHtml.TemplateResult {\n    if (this.#section) {\n      return this.#section.title ? this.#section.title : LitHtml.html`<span class=\"fallback\">(No Title)</span>`;\n    }\n    if (!this.#step) {\n      throw new Error('Missing both step and section');\n    }\n    switch (this.#step.type) {\n      case Models.Schema.StepType.CustomStep:\n        return i18nString(UIStrings.customStepTitle);\n      case Models.Schema.StepType.SetViewport:\n        return i18nString(UIStrings.setViewportClickTitle);\n      case Models.Schema.StepType.Click:\n        return i18nString(UIStrings.clickStepTitle);\n      case Models.Schema.StepType.DoubleClick:\n        return i18nString(UIStrings.doubleClickStepTitle);\n      case Models.Schema.StepType.Hover:\n        return i18nString(UIStrings.hoverStepTitle);\n      case Models.Schema.StepType.EmulateNetworkConditions:\n        return i18nString(UIStrings.emulateNetworkConditionsStepTitle);\n      case Models.Schema.StepType.Change:\n        return i18nString(UIStrings.changeStepTitle);\n      case Models.Schema.StepType.Close:\n        return i18nString(UIStrings.closeStepTitle);\n      case Models.Schema.StepType.Scroll:\n        return i18nString(UIStrings.scrollStepTitle);\n      case Models.Schema.StepType.KeyUp:\n        return i18nString(UIStrings.keyUpStepTitle);\n      case Models.Schema.StepType.KeyDown:\n        return i18nString(UIStrings.keyDownStepTitle);\n      case Models.Schema.StepType.WaitForElement:\n        return i18nString(UIStrings.waitForElementStepTitle);\n      case Models.Schema.StepType.WaitForExpression:\n        return i18nString(UIStrings.waitForExpressionStepTitle);\n      case Models.Schema.StepType.Navigate:\n        return i18nString(UIStrings.navigateStepTitle);\n    }\n  }\n\n  #getElementRoleTitle(role: string): string {\n    switch (role) {\n      case 'button':\n        return i18nString(UIStrings.elementRoleButton);\n      case 'input':\n        return i18nString(UIStrings.elementRoleInput);\n      default:\n        return i18nString(UIStrings.elementRoleFallback);\n    }\n  }\n\n  #getSelectorPreview(): string {\n    if (!this.#step || !('selectors' in this.#step)) {\n      return '';\n    }\n\n    const ariaSelector = this.#step.selectors.flat().find(selector => selector.startsWith('aria/'));\n\n    if (!ariaSelector) {\n      return '';\n    }\n\n    const m = ariaSelector.match(/^aria\\/(.+?)(\\[role=\"(.+)\"\\])?$/);\n    if (!m) {\n      return '';\n    }\n\n    return `${this.#getElementRoleTitle(m[3])} \"${m[1]}\"`;\n  }\n\n  #getSectionPreview(): string {\n    if (!this.#section) {\n      return '';\n    }\n    return this.#section.url;\n  }\n\n  #stepEdited(event: StepEditedEvent): void {\n    const step = this.#step || this.#section?.causingStep;\n    if (!step) {\n      throw new Error('Expected step.');\n    }\n    this.dispatchEvent(new StepChanged(step, event.data));\n  }\n\n  #handleStepAction(event: Menus.Menu.MenuItemSelectedEvent): void {\n    switch (event.itemValue) {\n      case 'add-step-before': {\n        const stepOrSection = this.#step || this.#section;\n        if (!stepOrSection) {\n          throw new Error('Expected step or section.');\n        }\n        this.dispatchEvent(new AddStep(stepOrSection, AddStepPosition.BEFORE));\n        break;\n      }\n      case 'add-step-after': {\n        const stepOrSection = this.#step || this.#section;\n        if (!stepOrSection) {\n          throw new Error('Expected step or section.');\n        }\n        this.dispatchEvent(new AddStep(stepOrSection, AddStepPosition.AFTER));\n        break;\n      }\n      case 'remove-step': {\n        const causingStep = this.#section?.causingStep;\n        if (!this.#step && !causingStep) {\n          throw new Error('Expected step.');\n        }\n        this.dispatchEvent(\n            new RemoveStep(this.#step || (causingStep as Models.Schema.Step)),\n        );\n        break;\n      }\n      case 'add-breakpoint': {\n        if (!this.#step) {\n          throw new Error('Expected step');\n        }\n        this.dispatchEvent(new AddBreakpointEvent(this.#stepIndex));\n        break;\n      }\n      case 'remove-breakpoint': {\n        if (!this.#step) {\n          throw new Error('Expected step');\n        }\n        this.dispatchEvent(new RemoveBreakpointEvent(this.#stepIndex));\n        break;\n      }\n      default: {\n        const actionId = event.itemValue as string;\n        if (!actionId.startsWith(COPY_ACTION_PREFIX)) {\n          throw new Error('Unknown step action.');\n        }\n\n        const copyStep = this.#step || this.#section?.causingStep;\n        if (!copyStep) {\n          throw new Error('Step not found.');\n        }\n\n        const converterId = actionId.substring(COPY_ACTION_PREFIX.length);\n        if (this.#recorderSettings) {\n          this.#recorderSettings.preferredCopyFormat = converterId;\n        }\n\n        this.dispatchEvent(new CopyStepEvent(structuredClone(copyStep)));\n      }\n    }\n  }\n\n  #onToggleActionsMenu(event: Event): void {\n    event.stopPropagation();\n    event.preventDefault();\n    this.#actionsMenuExpanded = !this.#actionsMenuExpanded;\n    this.#render();\n  }\n\n  #onCloseActionsMenu(): void {\n    this.#actionsMenuExpanded = false;\n    this.#render();\n  }\n\n  #onBreakpointClick(): void {\n    if (this.#hasBreakpoint) {\n      this.dispatchEvent(new RemoveBreakpointEvent(this.#stepIndex));\n    } else {\n      this.dispatchEvent(new AddBreakpointEvent(this.#stepIndex));\n    }\n    this.#render();\n  }\n\n  #getActionsMenuButton(): Buttons.Button.Button {\n    if (!this.#actionsMenuButton) {\n      throw new Error('Missing actionsMenuButton');\n    }\n    return this.#actionsMenuButton;\n  }\n\n  #getActions = (): Array<Action> => {\n    const actions = [];\n\n    if (!this.#isPlaying) {\n      if (this.#step) {\n        actions.push({\n          id: 'add-step-before',\n          label: i18nString(UIStrings.addStepBefore),\n          group: 'stepManagement',\n          groupTitle: i18nString(UIStrings.stepManagement),\n        });\n      }\n\n      actions.push({\n        id: 'add-step-after',\n        label: i18nString(UIStrings.addStepAfter),\n        group: 'stepManagement',\n        groupTitle: i18nString(UIStrings.stepManagement),\n      });\n\n      if (this.#removable) {\n        actions.push({\n          id: 'remove-step',\n          group: 'stepManagement',\n          groupTitle: i18nString(UIStrings.stepManagement),\n          label: i18nString(UIStrings.removeStep),\n        });\n      }\n    }\n\n    if (this.#step && !this.#isRecording) {\n      if (this.#hasBreakpoint) {\n        actions.push({\n          id: 'remove-breakpoint',\n          label: i18nString(UIStrings.removeBreakpoint),\n          group: 'breakPointManagement',\n          groupTitle: i18nString(UIStrings.breakpoints),\n        });\n      } else {\n        actions.push({\n          id: 'add-breakpoint',\n          label: i18nString(UIStrings.addBreakpoint),\n          group: 'breakPointManagement',\n          groupTitle: i18nString(UIStrings.breakpoints),\n        });\n      }\n    }\n\n    if (this.#step) {\n      for (const converter of this.#builtInConverters || []) {\n        actions.push({\n          id: COPY_ACTION_PREFIX + converter.getId(),\n          label: converter.getFormatName(),\n          group: 'copy',\n          groupTitle: i18nString(UIStrings.copyAs),\n        });\n      }\n      for (const converter of this.#extensionConverters || []) {\n        actions.push({\n          id: COPY_ACTION_PREFIX + converter.getId(),\n          label: converter.getFormatName(),\n          group: 'copy',\n          groupTitle: i18nString(UIStrings.copyAs),\n        });\n      }\n    }\n\n    return actions;\n  };\n\n  #renderStepActions(): LitHtml.TemplateResult|null {\n    const actions = this.#getActions();\n    const groupsById = new Map<string, Action[]>();\n    for (const action of actions) {\n      const group = groupsById.get(action.group);\n      if (!group) {\n        groupsById.set(action.group, [action]);\n      } else {\n        group.push(action);\n      }\n    }\n    const groups = [];\n    for (const [group, actions] of groupsById) {\n      groups.push({\n        group,\n        groupTitle: actions[0].groupTitle,\n        actions,\n      });\n    }\n    // clang-format off\n    return LitHtml.html`\n      <${Buttons.Button.Button.litTagName}\n        class=\"step-actions\"\n        title=${i18nString(UIStrings.openStepActions)}\n        aria-label=${i18nString(UIStrings.openStepActions)}\n        @click=${this.#onToggleActionsMenu}\n        @keydown=${(event: Event): void => {\n          event.stopPropagation();\n        }}\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#actionsMenuButton = node as Buttons.Button.Button;\n        })}\n        .data=${\n          {\n            variant: Buttons.Button.Variant.TOOLBAR,\n            iconName: 'dots-vertical',\n            title: i18nString(UIStrings.openStepActions),\n          } as Buttons.Button.ButtonData\n        }\n      ></${Buttons.Button.Button.litTagName}>\n      <${Menus.Menu.Menu.litTagName}\n        @menucloserequest=${this.#onCloseActionsMenu}\n        @menuitemselected=${this.#handleStepAction}\n        .origin=${this.#getActionsMenuButton.bind(this)}\n        .showSelectedItem=${false}\n        .showConnector=${false}\n        .open=${this.#actionsMenuExpanded}\n      >\n        ${LitHtml.Directives.repeat(\n          groups,\n          item => item.group,\n          item => {\n            return LitHtml.html`\n            <${Menus.Menu.MenuGroup.litTagName}\n              .name=${item.groupTitle}\n            >\n              ${LitHtml.Directives.repeat(\n                item.actions,\n                item => item.id,\n                item => {\n                  return LitHtml.html`<${Menus.Menu.MenuItem.litTagName}\n                      .value=${item.id}\n                    >\n                      ${item.label}\n                    </${Menus.Menu.MenuItem.litTagName}>\n                  `;\n                },\n              )}\n            </${Menus.Menu.MenuGroup.litTagName}>\n          `;\n          },\n        )}\n      </${Menus.Menu.Menu.litTagName}>\n    `;\n    // clang-format on\n  }\n\n  #onStepContextMenu = (event: MouseEvent): void => {\n    if (event.button !== 2) {\n      // 2 = secondary button = right click. We only show context menus if the\n      // user has right clicked.\n      return;\n    }\n\n    const menu = new UI.ContextMenu.ContextMenu(event);\n\n    const actions = this.#getActions();\n    const copyActions = actions.filter(\n        item => item.id.startsWith(COPY_ACTION_PREFIX),\n    );\n    const otherActions = actions.filter(\n        item => !item.id.startsWith(COPY_ACTION_PREFIX),\n    );\n    for (const item of otherActions) {\n      const section = menu.section(item.group);\n      section.appendItem(item.label, () => {\n        this.#handleStepAction(\n            new Menus.Menu.MenuItemSelectedEvent(item.id),\n        );\n      });\n    }\n\n    const preferredCopyAction = copyActions.find(\n        item => item.id === COPY_ACTION_PREFIX + this.#recorderSettings?.preferredCopyFormat,\n    );\n\n    if (preferredCopyAction) {\n      menu.section('copy').appendItem(preferredCopyAction.label, () => {\n        this.#handleStepAction(\n            new Menus.Menu.MenuItemSelectedEvent(preferredCopyAction.id),\n        );\n      });\n    }\n\n    if (copyActions.length) {\n      const copyAs = menu.section('copy').appendSubMenuItem(i18nString(UIStrings.copyAs));\n      for (const item of copyActions) {\n        if (item === preferredCopyAction) {\n          continue;\n        }\n        copyAs.section(item.group).appendItem(item.label, () => {\n          this.#handleStepAction(\n              new Menus.Menu.MenuItemSelectedEvent(item.id),\n          );\n        });\n      }\n    }\n\n    void menu.show();\n  };\n\n  #render(): void {\n    if (!this.#step && !this.#section) {\n      return;\n    }\n\n    const stepClasses = {\n      step: true,\n      expanded: this.#showDetails,\n      'is-success': this.#state === State.Success,\n      'is-current': this.#state === State.Current,\n      'is-outstanding': this.#state === State.Outstanding,\n      'is-error': this.#state === State.Error,\n      'is-stopped': this.#state === State.Stopped,\n      'is-start-of-group': this.#isStartOfGroup,\n      'is-first-section': this.#isFirstSection,\n      'has-breakpoint': this.#hasBreakpoint,\n    };\n    const isExpandable = Boolean(this.#step);\n    const mainTitle = this.#getStepTypeTitle();\n    const subtitle = this.#step ? this.#getSelectorPreview() : this.#getSectionPreview();\n\n    // clang-format off\n    LitHtml.render(\n      LitHtml.html`\n      <${TimelineSection.litTagName} .data=${\n        {\n          isFirstSection: this.#isFirstSection,\n          isLastSection: this.#isLastSection,\n          isStartOfGroup: this.#isStartOfGroup,\n          isEndOfGroup: this.#isEndOfGroup,\n          isSelected: this.#isSelected,\n        } as TimelineSectionData\n      } @contextmenu=${this.#onStepContextMenu} data-step-index=${\n        this.#stepIndex\n      } data-section-index=${\n        this.#sectionIndex\n      } class=${LitHtml.Directives.classMap(stepClasses)}>\n        <svg slot=\"icon\" width=\"24\" height=\"24\" height=\"100%\" class=\"icon\">\n          <circle class=\"circle-icon\"/>\n          <g class=\"error-icon\">\n            <path d=\"M1.5 1.5L6.5 6.5\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M1.5 6.5L6.5 1.5\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </g>\n          <path @click=${this.#onBreakpointClick.bind(\n            this,\n          )} class=\"breakpoint-icon\" d=\"M2.5 5.5H17.7098L21.4241 12L17.7098 18.5H2.5V5.5Z\"/>\n        </svg>\n        <div class=\"summary\">\n          <div class=\"title-container ${isExpandable ? 'action' : ''}\"\n            @click=${isExpandable && this.#toggleShowDetails.bind(this)}\n            @keydown=${\n              isExpandable && this.#onToggleShowDetailsKeydown.bind(this)\n            }\n            tabindex=\"0\"\n            aria-role=${isExpandable ? 'button' : ''}\n            aria-label=${isExpandable ? 'Show details for step' : ''}\n          >\n            ${\n              isExpandable\n                ? LitHtml.html`<${IconButton.Icon.Icon.litTagName}\n                    class=\"chevron\"\n                    .data=${\n                      {\n                        iconName: 'triangle-down',\n                        color: 'var(--color-text-primary)',\n                      } as IconButton.Icon.IconData\n                    }>\n                  </${IconButton.Icon.Icon.litTagName}>`\n                : ''\n            }\n            <div class=\"title\">\n              <div class=\"main-title\" title=${mainTitle}>${mainTitle}</div>\n              <div class=\"subtitle\" title=${subtitle}>${subtitle}</div>\n            </div>\n          </div>\n          <div class=\"filler\"></div>\n          ${this.#renderStepActions()}\n        </div>\n        <div class=\"details\">\n          ${\n            this.#step &&\n            LitHtml.html`<devtools-recorder-step-editor\n            .step=${this.#step}\n            .disabled=${this.#isPlaying}\n            @stepedited=${this.#stepEdited}>\n          </devtools-recorder-step-editor>`\n          }\n          ${\n            this.#section?.causingStep &&\n            LitHtml.html`<devtools-recorder-step-editor\n            .step=${this.#section.causingStep}\n            .isTypeEditable=${false}\n            .disabled=${this.#isPlaying}\n            @stepedited=${this.#stepEdited}>\n          </devtools-recorder-step-editor>`\n          }\n        </div>\n        ${\n          this.#error &&\n          LitHtml.html`\n          <div class=\"error\" role=\"alert\">\n            ${this.#error.message}\n          </div>\n        `\n        }\n      </${TimelineSection.litTagName}>\n    `,\n      this.#shadow,\n      { host: this },\n    );\n    // clang-format on\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-step-view', StepView);\n"]}