{"version":3,"file":"TimelineSelection.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineSelection.ts"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,GAAG,MAAM,uBAAuB,CAAC;AAC7C,OAAO,KAAK,aAAa,MAAM,+CAA+C,CAAC;AAC/E,OAAO,KAAK,WAAW,MAAM,6BAA6B,CAAC;AAM3D,MAAM,oBAAoB,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AAGtD,MAAM,OAAO,iBAAiB;IACnB,SAAS,CAAwC;IACjD,OAAO,CAAwC;IAC/C,MAAM,CAAuB;IAEtC,YACI,SAAgD,EAAE,OAA8C,EAChG,MAA4B;QAC9B,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAED,MAAM,CAAC,aAAa,CAAC,MAA4B;QAC/C,OAAO,MAAM,YAAY,aAAa,CAAC,kBAAkB,CAAC,aAAa,CAAC;IAC1E,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,KAAqD;QACpE,OAAO,IAAI,iBAAiB,CACxB,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,EAC5G,KAAK,CAAC,CAAC;IACb,CAAC;IAED,MAAM,CAAC,yBAAyB,CAAC,MAA4B;QAC3D,OAAO,MAAM,YAAY,aAAa,CAAC,aAAa,CAAC,cAAc,CAAC;IACtE,CAAC;IAED,MAAM,CAAC,kBAAkB,CAAC,OAAmD;QAC3E,OAAO,IAAI,iBAAiB,CACxB,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,EACxD,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;IAC5F,CAAC;IAED,MAAM,CAAC,qBAAqB,CAAC,MAA4B;QAEvD,IAAI,MAAM,YAAY,GAAG,CAAC,YAAY,CAAC,KAAK,EAAE;YAC5C,OAAO,IAAI,CAAC;SACb;QACD,4HAA4H;QAC5H,IAAI,iBAAiB,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,iBAAiB,CAAC,gBAAgB,CAAC,MAAM,CAAC;YACrF,iBAAiB,CAAC,yBAAyB,CAAC,MAAM,CAAC,EAAE;YACvD,OAAO,KAAK,CAAC;SACd;QACD,OAAO,GAAG,CAAC,YAAY,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;IACvD,CAAC;IAED,MAAM,CAAC,cAAc,CAAC,KAA4C;QAChE,MAAM,EAAC,SAAS,EAAE,OAAO,EAAC,GAAG,GAAG,CAAC,YAAY,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;QACjF,OAAO,IAAI,iBAAiB,CAAC,SAAS,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IACpH,CAAC;IAED,MAAM,CAAC,gBAAgB,CAAC,MAA4B;QAClD,OAAO,MAAM,KAAK,oBAAoB,CAAC;IACzC,CAAC;IAED,MAAM,CAAC,SAAS,CAAC,SAAiB,EAAE,OAAe;QACjD,OAAO,IAAI,iBAAiB,CACxB,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,EAChG,oBAAoB,CAAC,CAAC;IAC5B,CAAC;CACF","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TimelineModel from '../../models/timeline_model/timeline_model.js';\nimport * as TraceEngine from '../../models/trace/trace.js';\n\ntype PermittedObjectTypes = TimelineModel.TimelineFrameModel.TimelineFrame|\n                            TimelineModel.TimelineModel.NetworkRequest|SDK.TracingModel.Event|\n                            TraceEngine.Types.TraceEvents.TraceEventData|SelectionRange;\n\nconst SelectionRangeSymbol = Symbol('SelectionRange');\nexport type SelectionRange = typeof SelectionRangeSymbol;\n\nexport class TimelineSelection {\n  readonly startTime: TraceEngine.Types.Timing.MilliSeconds;\n  readonly endTime: TraceEngine.Types.Timing.MilliSeconds;\n  readonly object: PermittedObjectTypes;\n\n  constructor(\n      startTime: TraceEngine.Types.Timing.MilliSeconds, endTime: TraceEngine.Types.Timing.MilliSeconds,\n      object: PermittedObjectTypes) {\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.object = object;\n  }\n\n  static isFrameObject(object: PermittedObjectTypes): object is TimelineModel.TimelineFrameModel.TimelineFrame {\n    return object instanceof TimelineModel.TimelineFrameModel.TimelineFrame;\n  }\n\n  static fromFrame(frame: TimelineModel.TimelineFrameModel.TimelineFrame): TimelineSelection {\n    return new TimelineSelection(\n        TraceEngine.Types.Timing.MilliSeconds(frame.startTime), TraceEngine.Types.Timing.MilliSeconds(frame.endTime),\n        frame);\n  }\n\n  static isNetworkRequestSelection(object: PermittedObjectTypes): object is TimelineModel.TimelineModel.NetworkRequest {\n    return object instanceof TimelineModel.TimelineModel.NetworkRequest;\n  }\n\n  static fromNetworkRequest(request: TimelineModel.TimelineModel.NetworkRequest): TimelineSelection {\n    return new TimelineSelection(\n        TraceEngine.Types.Timing.MilliSeconds(request.startTime),\n        TraceEngine.Types.Timing.MilliSeconds(request.endTime || request.startTime), request);\n  }\n\n  static isTraceEventSelection(object: PermittedObjectTypes): object is SDK.TracingModel.Event\n      |TraceEngine.Types.TraceEvents.TraceEventData {\n    if (object instanceof SDK.TracingModel.Event) {\n      return true;\n    }\n    // Sadly new trace events are just raw objects, so now we have to confirm it is a trace event by ruling everything else out.\n    if (TimelineSelection.isFrameObject(object) || TimelineSelection.isRangeSelection(object) ||\n        TimelineSelection.isNetworkRequestSelection(object)) {\n      return false;\n    }\n    return SDK.TracingModel.eventIsFromNewEngine(object);\n  }\n\n  static fromTraceEvent(event: SDK.TracingModel.CompatibleTraceEvent): TimelineSelection {\n    const {startTime, endTime} = SDK.TracingModel.timesForEventInMilliseconds(event);\n    return new TimelineSelection(startTime, TraceEngine.Types.Timing.MilliSeconds(endTime || (startTime + 1)), event);\n  }\n\n  static isRangeSelection(object: PermittedObjectTypes): object is SelectionRange {\n    return object === SelectionRangeSymbol;\n  }\n\n  static fromRange(startTime: number, endTime: number): TimelineSelection {\n    return new TimelineSelection(\n        TraceEngine.Types.Timing.MilliSeconds(startTime), TraceEngine.Types.Timing.MilliSeconds(endTime),\n        SelectionRangeSymbol);\n  }\n}\n"]}