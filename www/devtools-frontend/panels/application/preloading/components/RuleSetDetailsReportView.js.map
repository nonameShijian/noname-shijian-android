{"version":3,"file":"RuleSetDetailsReportView.js","sourceRoot":"","sources":["../../../../../../../../front_end/panels/application/preloading/components/RuleSetDetailsReportView.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport {assertNotNullOrUndefined} from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as Protocol from '../../../../generated/protocol.js';\nimport * as ComponentHelpers from '../../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../../ui/components/icon_button/icon_button.js';\nimport * as LegacyWrapper from '../../../../ui/components/legacy_wrapper/legacy_wrapper.js';\nimport * as Coordinator from '../../../../ui/components/render_coordinator/render_coordinator.js';\nimport * as ReportView from '../../../../ui/components/report_view/report_view.js';\nimport * as LitHtml from '../../../../ui/lit-html/lit-html.js';\nimport * as NetworkForward from '../../../network/forward/forward.js';\n\nimport type * as UI from '../../../../ui/legacy/legacy.js';\n\nimport preloadingDetailsReportViewStyles from './preloadingDetailsReportView.css.js';\n\ntype RuleSet = Protocol.Preload.RuleSet;\n\nconst UIStrings = {\n  /**\n   *@description Section header: detailed information of SpeculationRules rule set\n   */\n  detailsDetailedInformation: 'Detailed information',\n  /**\n   *@description Description term: validity of rule set\n   */\n  detailsValidity: 'Validity',\n  /**\n   *@description Description term: error detail of rule set\n   */\n  detailsError: 'Error',\n  /**\n   *@description Description term: source location of rule set (<script> or URL designated in the HTTP header)\n   */\n  detailsLocation: 'Location',\n  /**\n   *@description Description term: source text of rule set\n   */\n  detailsSource: 'Source',\n  /**\n   *@description Validity: Rule set is valid\n   */\n  validityValid: 'Valid',\n  /**\n   *@description validity: Rule set must be a valid JSON object\n   */\n  validityInvalid: 'Invalid; source is not a JSON object',\n  /**\n   *@description validity: Rule set contains invalid rules and they are ignored\n   */\n  validitySomeRulesInvalid: 'Some rules are invalid and ignored',\n  /**\n   *@description button: Title of button to reveal the corresponding request of rule set in Elements panel\n   */\n  buttonClickToRevealInElementsPanel: 'Click to reveal in Elements panel',\n  /**\n   *@description button: Title of button to reveal the corresponding request of rule set in Network panel\n   */\n  buttonClickToRevealInNetworkPanel: 'Click to reveal in Network panel',\n};\nconst str_ =\n    i18n.i18n.registerUIStrings('panels/application/preloading/components/RuleSetDetailsReportView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nclass PreloadingUIUtils {\n  // Summary of error of rule set.\n  static validity({errorType}: Protocol.Preload.RuleSet): string {\n    switch (errorType) {\n      case undefined:\n        return i18nString(UIStrings.validityValid);\n      case Protocol.Preload.RuleSetErrorType.SourceIsNotJsonObject:\n        return i18nString(UIStrings.validityInvalid);\n      case Protocol.Preload.RuleSetErrorType.InvalidRulesSkipped:\n        return i18nString(UIStrings.validitySomeRulesInvalid);\n    }\n  }\n}\n\nconst coordinator = Coordinator.RenderCoordinator.RenderCoordinator.instance();\n\nexport type RuleSetDetailsReportViewData = RuleSet|null;\n\nexport class RuleSetDetailsReportView extends LegacyWrapper.LegacyWrapper.WrappableComponent<UI.Widget.VBox> {\n  static readonly litTagName = LitHtml.literal`devtools-resources-rulesets-details-report-view`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #data: RuleSetDetailsReportViewData = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [preloadingDetailsReportViewStyles];\n  }\n\n  set data(data: RuleSetDetailsReportViewData) {\n    this.#data = data;\n    void this.#render();\n  }\n\n  async #render(): Promise<void> {\n    await coordinator.write('RuleSetDetailsReportView render', () => {\n      if (this.#data === null) {\n        LitHtml.render(LitHtml.nothing, this.#shadow, {host: this});\n        return;\n      }\n\n      const validity = PreloadingUIUtils.validity(this.#data);\n      // TODO(https://crbug.com/1425354): Support i18n.\n      const error = this.#data.errorMessage || '';\n\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      LitHtml.render(LitHtml.html`\n        <${ReportView.ReportView.Report.litTagName} .data=${{reportTitle: 'SpeculationRules rule set'} as ReportView.ReportView.ReportData}>\n          <${ReportView.ReportView.ReportSectionHeader.litTagName}>${i18nString(UIStrings.detailsDetailedInformation)}</${\n            ReportView.ReportView.ReportSectionHeader.litTagName}>\n\n          <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.detailsValidity)}</${\n            ReportView.ReportView.ReportKey.litTagName}>\n          <${ReportView.ReportView.ReportValue.litTagName}>\n            <div class=\"text-ellipsis\" title=\"\">\n              ${validity}\n            </div>\n          </${ReportView.ReportView.ReportValue.litTagName}>\n\n          <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.detailsError)}</${\n            ReportView.ReportView.ReportKey.litTagName}>\n          <${ReportView.ReportView.ReportValue.litTagName}>\n            <div class=\"text-ellipsis\" title=\"\">\n              ${error}\n            </div>\n          </${ReportView.ReportView.ReportValue.litTagName}>\n\n          ${this.#location()}\n\n          ${this.#source(this.#data.sourceText)}\n        </${ReportView.ReportView.Report.litTagName}>\n      `, this.#shadow, {host: this});\n      // clang-format on\n    });\n  }\n\n  #location(): LitHtml.LitTemplate {\n    assertNotNullOrUndefined(this.#data);\n\n    if (this.#data.backendNodeId !== undefined) {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      return LitHtml.html`\n          <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.detailsLocation)}</${\n            ReportView.ReportView.ReportKey.litTagName}>\n          <${ReportView.ReportView.ReportValue.litTagName}>\n            <div class=\"text-ellipsis\">\n              <button class=\"link\" role=\"link\"\n                @click=${this.#revealSpeculationRulesInElements}\n                title=${i18nString(UIStrings.buttonClickToRevealInElementsPanel)}\n              >\n                <${IconButton.Icon.Icon.litTagName} .data=${{\n                  iconName: 'code-circle',\n                  color: 'var(--icon-link)',\n                  width: '16px',\n                  height: '16px',\n                } as IconButton.Icon.IconData}>\n                </${IconButton.Icon.Icon.litTagName}>\n                &lt;script&gt;\n              </button>\n            </div>\n          </${ReportView.ReportView.ReportValue.litTagName}>\n      `;\n      // clang-format on\n    }\n\n    if (this.#data.url !== undefined) {\n      let maybeButton;\n      if (this.#data.requestId === undefined) {\n        maybeButton = LitHtml.nothing;\n      } else {\n        // Disabled until https://crbug.com/1079231 is fixed.\n        // clang-format off\n        maybeButton = LitHtml.html`\n            <button class=\"link\" role=\"link\"\n              @click=${this.#revealSpeculationRulesInNetwork}\n              title=${i18nString(UIStrings.buttonClickToRevealInNetworkPanel)}\n            >\n              <${IconButton.Icon.Icon.litTagName} .data=${{\n                iconName: 'arrow-up-down-circle',\n                color: 'var(--icon-link)',\n                width: '16px',\n                height: '16px',\n              } as IconButton.Icon.IconData}>\n              </${IconButton.Icon.Icon.litTagName}>\n            </button>\n        `;\n        // clang-format on\n      }\n\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      return LitHtml.html`\n          <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.detailsLocation)}</${\n            ReportView.ReportView.ReportKey.litTagName}>\n          <${ReportView.ReportView.ReportValue.litTagName}>\n            <div class=\"text-ellipsis\">\n              ${maybeButton}\n              ${this.#data.url}\n            </div>\n          </${ReportView.ReportView.ReportValue.litTagName}>\n      `;\n      // clang-format on\n    }\n\n    throw new Error('unreachable');\n  }\n\n  async #revealSpeculationRulesInElements(): Promise<void> {\n    const backendNodeId = this.#data?.backendNodeId || null;\n    if (backendNodeId === null) {\n      throw new Error('unreachable');\n    }\n\n    const target = SDK.TargetManager.TargetManager.instance().scopeTarget();\n    if (target === null) {\n      return;\n    }\n\n    await Common.Revealer.reveal(new SDK.DOMModel.DeferredDOMNode(target, backendNodeId));\n  }\n\n  async #revealSpeculationRulesInNetwork(): Promise<void> {\n    const requestId = this.#data?.requestId || null;\n    if (requestId === null) {\n      throw new Error('unreachable');\n    }\n\n    const request = SDK.TargetManager.TargetManager.instance()\n                        .scopeTarget()\n                        ?.model(SDK.NetworkManager.NetworkManager)\n                        ?.requestForId(requestId) ||\n        null;\n    if (request === null) {\n      return;\n    }\n\n    const requestLocation = NetworkForward.UIRequestLocation.UIRequestLocation.tab(\n        request, NetworkForward.UIRequestLocation.UIRequestTabs.Preview, {clearFilter: false});\n    await Common.Revealer.reveal(requestLocation);\n  }\n\n  #source(sourceText: string): LitHtml.LitTemplate {\n    let sourceJson;\n    try {\n      sourceJson = JSON.parse(sourceText);\n    } catch (_) {\n    }\n\n    if (sourceJson === undefined) {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      return LitHtml.html`\n          <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.detailsSource)}</${\n            ReportView.ReportView.ReportKey.litTagName}>\n          <${ReportView.ReportView.ReportValue.litTagName}>\n            <div class=\"text-ellipsis\" title=\"\">\n              ${sourceText}\n            </div>\n          </${ReportView.ReportView.ReportValue.litTagName}>\n      `;\n      // clang-format on\n    }\n\n    // TODO(https://crbug.com/1384419): Consider to add another pane and use SourceFrame.JSONView.JSONView.\n    const json = JSON.stringify(sourceJson);\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n      return LitHtml.html`\n          <${ReportView.ReportView.ReportKey.litTagName}>${i18nString(UIStrings.detailsSource)}</${\n            ReportView.ReportView.ReportKey.litTagName}>\n          <${ReportView.ReportView.ReportValue.litTagName}>\n            <div class=\"text-ellipsis\" title=\"\">\n              ${json}\n            </div>\n          </${ReportView.ReportView.ReportValue.litTagName}>\n      `;\n    // clang-format on\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent(\n    'devtools-resources-rulesets-details-report-view', RuleSetDetailsReportView);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-resources-rulesets-details-report-view': RuleSetDetailsReportView;\n  }\n}\n"]}