{"version":3,"file":"flamechart.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/components/docs/performance_panel/flamechart.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as EnvironmentHelpers from '../../../../../test/unittests/front_end/helpers/EnvironmentHelpers.js';\nimport * as TimelineHelpers from '../../../../../test/unittests/front_end/helpers/TimelineHelpers.js';\nimport * as TraceHelpers from '../../../../../test/unittests/front_end/helpers/TraceHelpers.js';\nimport * as PerfUI from '../../../legacy/components/perf_ui/perf_ui.js';\nimport * as ComponentSetup from '../../helpers/helpers.js';\n\nimport type * as Platform from '../../../../core/platform/platform.js';\nimport * as TraceEngine from '../../../../models/trace/trace.js';\n\nawait EnvironmentHelpers.initializeGlobalVars();\nawait ComponentSetup.ComponentServerSetup.setup();\n\n/**\n * Render a basic flame chart with 3 events on the same level\n **/\nfunction renderExample1() {\n  class FakeProviderWithBasicEvents extends TimelineHelpers.FakeFlameChartProvider {\n    override timelineData(): PerfUI.FlameChart.FlameChartTimelineData|null {\n      return PerfUI.FlameChart.FlameChartTimelineData.create({\n        entryLevels: [1, 1, 1],\n        entryStartTimes: [5, 60, 80],\n        entryTotalTimes: [50, 10, 10],\n        groups: [{\n          name: 'Test Group' as Platform.UIString.LocalizedString,\n          startLevel: 1,\n          style: {\n            height: 17,\n            padding: 4,\n            collapsible: false,\n            color: 'black',\n            backgroundColor: 'grey',\n            nestingLevel: 0,\n            itemsHeight: 17,\n          },\n        }],\n      });\n    }\n  }\n\n  const container = document.querySelector('div#container1');\n  if (!container) {\n    throw new Error('No container');\n  }\n  const delegate = new TraceHelpers.MockFlameChartDelegate();\n  const dataProvider = new FakeProviderWithBasicEvents();\n  const flameChart = new PerfUI.FlameChart.FlameChart(dataProvider, delegate);\n\n  flameChart.markAsRoot();\n  flameChart.setWindowTimes(0, 100);\n  flameChart.show(container);\n  flameChart.update();\n}\n\n/**\n * Render a flame chart with main thread long events to stripe and a warning triangle.\n **/\nfunction renderExample2() {\n  class FakeProviderWithLongTasksForStriping extends TimelineHelpers.FakeFlameChartProvider {\n    override timelineData(): PerfUI.FlameChart.FlameChartTimelineData|null {\n      return PerfUI.FlameChart.FlameChartTimelineData.create({\n        entryLevels: [1, 1, 2],\n        entryStartTimes: [5, 80, 5],\n        entryTotalTimes: [70, 10, 80],\n        entryDecorations: [\n          [\n            {\n              type: 'CANDY',\n              startAtTime: TraceEngine.Types.Timing.MicroSeconds(50_000),\n            },\n            {type: 'WARNING_TRIANGLE'},\n          ],\n          [{type: 'WARNING_TRIANGLE'}],\n          [\n            {\n              type: 'CANDY',\n              startAtTime: TraceEngine.Types.Timing.MicroSeconds(50_000),\n            },\n          ],\n        ],\n        groups: [{\n          name: 'Testing Candy Stripe decorations and warning triangles' as Platform.UIString.LocalizedString,\n          startLevel: 1,\n          style: {\n            height: 17,\n            padding: 4,\n            collapsible: false,\n            color: 'black',\n            backgroundColor: 'grey',\n            nestingLevel: 0,\n            itemsHeight: 17,\n          },\n        }],\n      });\n    }\n  }\n\n  const container = document.querySelector('div#container2');\n  if (!container) {\n    throw new Error('No container');\n  }\n  const delegate = new TraceHelpers.MockFlameChartDelegate();\n  const dataProvider = new FakeProviderWithLongTasksForStriping();\n  const flameChart = new PerfUI.FlameChart.FlameChart(dataProvider, delegate);\n\n  flameChart.markAsRoot();\n  flameChart.setWindowTimes(0, 100);\n  flameChart.show(container);\n  flameChart.update();\n}\n\nrenderExample1();\nrenderExample2();\n"]}