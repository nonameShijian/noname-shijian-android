{"version":3,"file":"CookieIssue.js","sourceRoot":"","sources":["../../../../../../front_end/models/issues_manager/CookieIssue.ts"],"names":[],"mappings":"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","sourcesContent":["\n// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {Issue, IssueCategory, IssueKind} from './Issue.js';\n\nimport {\n  resolveLazyDescription,\n  type LazyMarkdownIssueDescription,\n  type MarkdownIssueDescription,\n} from './MarkdownIssueDescription.js';\n\nconst UIStrings = {\n  /**\n   *@description Label for the link for SameSiteCookies Issues\n   */\n  samesiteCookiesExplained: 'SameSite cookies explained',\n  /**\n   *@description Label for the link for Schemeful Same-Site Issues\n   */\n  howSchemefulSamesiteWorks: 'How Schemeful Same-Site Works',\n  /**\n   *@description Phrase used to describe the security of a context. Substitued like 'a secure context' or 'a secure origin'.\n   */\n  aSecure: 'a secure',  // eslint-disable-line rulesdir/l10n_no_unused_message\n  /**\n   * @description Phrase used to describe the security of a context. Substitued like 'an insecure context' or 'an insecure origin'.\n   */\n  anInsecure: 'an insecure',  // eslint-disable-line rulesdir/l10n_no_unused_message\n  /**\n   * @description Label for a link for SameParty Issues. 'Attribute' refers to a cookie attribute.\n   */\n  firstPartySetsExplained: '`First-Party Sets` and the `SameParty` attribute',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/issues_manager/CookieIssue.ts', UIStrings);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nexport class CookieIssue extends Issue {\n  #issueDetails: Protocol.Audits.CookieIssueDetails;\n\n  constructor(\n      code: string, issueDetails: Protocol.Audits.CookieIssueDetails, issuesModel: SDK.IssuesModel.IssuesModel) {\n    super(code, issuesModel);\n    this.#issueDetails = issueDetails;\n  }\n\n  #cookieId(): string {\n    if (this.#issueDetails.cookie) {\n      const {domain, path, name} = this.#issueDetails.cookie;\n      const cookieId = `${domain};${path};${name}`;\n      return cookieId;\n    }\n    return this.#issueDetails.rawCookieLine ?? 'no-cookie-info';\n  }\n\n  primaryKey(): string {\n    const requestId = this.#issueDetails.request ? this.#issueDetails.request.requestId : 'no-request';\n    return `${this.code()}-(${this.#cookieId()})-(${requestId})`;\n  }\n\n  /**\n   * Returns an array of issues from a given CookieIssueDetails.\n   */\n  static createIssuesFromCookieIssueDetails(\n      cookieIssueDetails: Protocol.Audits.CookieIssueDetails, issuesModel: SDK.IssuesModel.IssuesModel): CookieIssue[] {\n    const issues: CookieIssue[] = [];\n\n    // Exclusion reasons have priority. It means a cookie was blocked. Create an issue\n    // for every exclusion reason but ignore warning reasons if the cookie was blocked.\n    // Some exclusion reasons are dependent on warning reasons existing in order to produce an issue.\n    if (cookieIssueDetails.cookieExclusionReasons && cookieIssueDetails.cookieExclusionReasons.length > 0) {\n      for (const exclusionReason of cookieIssueDetails.cookieExclusionReasons) {\n        const code = CookieIssue.codeForCookieIssueDetails(\n            exclusionReason, cookieIssueDetails.cookieWarningReasons, cookieIssueDetails.operation,\n            cookieIssueDetails.cookieUrl);\n        if (code) {\n          issues.push(new CookieIssue(code, cookieIssueDetails, issuesModel));\n        }\n      }\n      return issues;\n    }\n\n    if (cookieIssueDetails.cookieWarningReasons) {\n      for (const warningReason of cookieIssueDetails.cookieWarningReasons) {\n        // warningReasons should be an empty array here.\n        const code = CookieIssue.codeForCookieIssueDetails(\n            warningReason, [], cookieIssueDetails.operation, cookieIssueDetails.cookieUrl);\n        if (code) {\n          issues.push(new CookieIssue(code, cookieIssueDetails, issuesModel));\n        }\n      }\n    }\n    return issues;\n  }\n\n  /**\n   * Calculates an issue code from a reason, an operation, and an array of warningReasons. All these together\n   * can uniquely identify a specific cookie issue.\n   * warningReasons is only needed for some CookieExclusionReason in order to determine if an issue should be raised.\n   * It is not required if reason is a CookieWarningReason.\n   */\n  static codeForCookieIssueDetails(\n      reason: Protocol.Audits.CookieExclusionReason|Protocol.Audits.CookieWarningReason,\n      warningReasons: Protocol.Audits.CookieWarningReason[], operation: Protocol.Audits.CookieOperation,\n      cookieUrl?: string): string|null {\n    const isURLSecure = cookieUrl && (cookieUrl.startsWith('https://') || cookieUrl.startsWith('wss://'));\n    const secure = isURLSecure ? 'Secure' : 'Insecure';\n\n    if (reason === Protocol.Audits.CookieExclusionReason.ExcludeSameSiteStrict ||\n        reason === Protocol.Audits.CookieExclusionReason.ExcludeSameSiteLax ||\n        reason === Protocol.Audits.CookieExclusionReason.ExcludeSameSiteUnspecifiedTreatedAsLax) {\n      if (warningReasons && warningReasons.length > 0) {\n        if (warningReasons.includes(Protocol.Audits.CookieWarningReason.WarnSameSiteStrictLaxDowngradeStrict)) {\n          return [\n            Protocol.Audits.InspectorIssueCode.CookieIssue,\n            'ExcludeNavigationContextDowngrade',\n            secure,\n          ].join('::');\n        }\n\n        if (warningReasons.includes(Protocol.Audits.CookieWarningReason.WarnSameSiteStrictCrossDowngradeStrict) ||\n            warningReasons.includes(Protocol.Audits.CookieWarningReason.WarnSameSiteStrictCrossDowngradeLax) ||\n            warningReasons.includes(Protocol.Audits.CookieWarningReason.WarnSameSiteLaxCrossDowngradeStrict) ||\n            warningReasons.includes(Protocol.Audits.CookieWarningReason.WarnSameSiteLaxCrossDowngradeLax)) {\n          return [\n            Protocol.Audits.InspectorIssueCode.CookieIssue,\n            'ExcludeContextDowngrade',\n            operation,\n            secure,\n          ].join('::');\n        }\n      }\n\n      // If we have ExcludeSameSiteUnspecifiedTreatedAsLax but no corresponding warnings, then add just\n      // the Issue code for ExcludeSameSiteUnspecifiedTreatedAsLax.\n      if (reason === Protocol.Audits.CookieExclusionReason.ExcludeSameSiteUnspecifiedTreatedAsLax) {\n        return [Protocol.Audits.InspectorIssueCode.CookieIssue, reason, operation].join('::');\n      }\n\n      // ExcludeSameSiteStrict and ExcludeSameSiteLax require being paired with an appropriate warning. We didn't\n      // find one of those warnings so return null to indicate there shouldn't be an issue created.\n      return null;\n    }\n\n    if (reason === Protocol.Audits.CookieWarningReason.WarnSameSiteStrictLaxDowngradeStrict) {\n      return [Protocol.Audits.InspectorIssueCode.CookieIssue, reason, secure].join('::');\n    }\n    // These have the same message.\n    if (reason === Protocol.Audits.CookieWarningReason.WarnSameSiteStrictCrossDowngradeStrict ||\n        reason === Protocol.Audits.CookieWarningReason.WarnSameSiteStrictCrossDowngradeLax ||\n        reason === Protocol.Audits.CookieWarningReason.WarnSameSiteLaxCrossDowngradeLax ||\n        reason === Protocol.Audits.CookieWarningReason.WarnSameSiteLaxCrossDowngradeStrict) {\n      return [Protocol.Audits.InspectorIssueCode.CookieIssue, 'WarnCrossDowngrade', operation, secure].join('::');\n    }\n    return [Protocol.Audits.InspectorIssueCode.CookieIssue, reason, operation].join('::');\n  }\n\n  override cookies(): Iterable<Protocol.Audits.AffectedCookie> {\n    if (this.#issueDetails.cookie) {\n      return [this.#issueDetails.cookie];\n    }\n    return [];\n  }\n\n  override rawCookieLines(): Iterable<string> {\n    if (this.#issueDetails.rawCookieLine) {\n      return [this.#issueDetails.rawCookieLine];\n    }\n    return [];\n  }\n\n  override requests(): Iterable<Protocol.Audits.AffectedRequest> {\n    if (this.#issueDetails.request) {\n      return [this.#issueDetails.request];\n    }\n    return [];\n  }\n\n  getCategory(): IssueCategory {\n    return IssueCategory.Cookie;\n  }\n\n  getDescription(): MarkdownIssueDescription|null {\n    const description = issueDescriptions.get(this.code());\n    if (!description) {\n      return null;\n    }\n    return resolveLazyDescription(description);\n  }\n\n  override isCausedByThirdParty(): boolean {\n    const outermostFrame = SDK.FrameManager.FrameManager.instance().getOutermostFrame();\n    return isCausedByThirdParty(outermostFrame, this.#issueDetails.cookieUrl);\n  }\n\n  getKind(): IssueKind {\n    if (this.#issueDetails.cookieExclusionReasons?.length > 0) {\n      return IssueKind.PageError;\n    }\n    return IssueKind.BreakingChange;\n  }\n\n  static fromInspectorIssue(issuesModel: SDK.IssuesModel.IssuesModel, inspectorIssue: Protocol.Audits.InspectorIssue):\n      CookieIssue[] {\n    const cookieIssueDetails = inspectorIssue.details.cookieIssueDetails;\n    if (!cookieIssueDetails) {\n      console.warn('Cookie issue without details received.');\n      return [];\n    }\n\n    return CookieIssue.createIssuesFromCookieIssueDetails(cookieIssueDetails, issuesModel);\n  }\n}\n\n/**\n * Exported for unit test.\n */\nexport function isCausedByThirdParty(\n    outermostFrame: SDK.ResourceTreeModel.ResourceTreeFrame|null, cookieUrl?: string): boolean {\n  if (!outermostFrame) {\n    // The outermost frame is not yet available. Consider this issue as a third-party issue\n    // until the outermost frame is available. This will prevent the issue from being visible\n    // for only just a split second.\n    return true;\n  }\n\n  // In the case of no domain and registry, we assume its an IP address or localhost\n  // during development, in this case we classify the issue as first-party.\n  if (!cookieUrl || outermostFrame.domainAndRegistry() === '') {\n    return false;\n  }\n\n  const parsedCookieUrl = Common.ParsedURL.ParsedURL.fromString(cookieUrl);\n  if (!parsedCookieUrl) {\n    return false;\n  }\n\n  // For both operation types we compare the cookieUrl's domain  with the outermost frames\n  // registered domain to determine first-party vs third-party. If they don't match\n  // then we consider this issue a third-party issue.\n  //\n  // For a Set operation: The Set-Cookie response is part of a request to a third-party.\n  //\n  // For a Read operation: The cookie was included in a request to a third-party\n  //     site. Only cookies that have their domain also set to this third-party\n  //     are included in the request. We assume that the cookie was set by the same\n  //     third-party at some point, so we treat this as a third-party issue.\n  //\n  // TODO(crbug.com/1080589): Use \"First-Party sets\" instead of the sites registered domain.\n  return !isSubdomainOf(parsedCookieUrl.domain(), outermostFrame.domainAndRegistry());\n}\n\nfunction isSubdomainOf(subdomain: string, superdomain: string): boolean {\n  // Subdomain must be identical or have strictly more labels than the\n  // superdomain.\n  if (subdomain.length <= superdomain.length) {\n    return subdomain === superdomain;\n  }\n\n  // Superdomain must be suffix of subdomain, and the last character not\n  // included in the matching substring must be a dot.\n  if (!subdomain.endsWith(superdomain)) {\n    return false;\n  }\n\n  const subdomainWithoutSuperdomian = subdomain.substr(0, subdomain.length - superdomain.length);\n  return subdomainWithoutSuperdomian.endsWith('.');\n}\n\nconst sameSiteUnspecifiedErrorRead: LazyMarkdownIssueDescription = {\n  file: 'SameSiteUnspecifiedTreatedAsLaxRead.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteUnspecifiedErrorSet: LazyMarkdownIssueDescription = {\n  file: 'SameSiteUnspecifiedTreatedAsLaxSet.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteUnspecifiedWarnRead: LazyMarkdownIssueDescription = {\n  file: 'SameSiteUnspecifiedLaxAllowUnsafeRead.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteUnspecifiedWarnSet: LazyMarkdownIssueDescription = {\n  file: 'SameSiteUnspecifiedLaxAllowUnsafeSet.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteNoneInsecureErrorRead: LazyMarkdownIssueDescription = {\n  file: 'SameSiteNoneInsecureErrorRead.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteNoneInsecureErrorSet: LazyMarkdownIssueDescription = {\n  file: 'SameSiteNoneInsecureErrorSet.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteNoneInsecureWarnRead: LazyMarkdownIssueDescription = {\n  file: 'SameSiteNoneInsecureWarnRead.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst sameSiteNoneInsecureWarnSet: LazyMarkdownIssueDescription = {\n  file: 'SameSiteNoneInsecureWarnSet.md',\n  links: [\n    {\n      link: 'https://web.dev/samesite-cookies-explained/',\n      linkTitle: i18nLazyString(UIStrings.samesiteCookiesExplained),\n    },\n  ],\n};\n\nconst schemefulSameSiteArticles =\n    [{link: 'https://web.dev/schemeful-samesite/', linkTitle: i18nLazyString(UIStrings.howSchemefulSamesiteWorks)}];\n\nfunction schemefulSameSiteSubstitutions(\n    {isDestinationSecure, isOriginSecure}: {isDestinationSecure: boolean, isOriginSecure: boolean}):\n    Map<string, () => string> {\n  return new Map([\n    // TODO(crbug.com/1168438): Use translated phrases once the issue description is localized.\n    ['PLACEHOLDER_destination', (): string => isDestinationSecure ? 'a secure' : 'an insecure'],\n    ['PLACEHOLDER_origin', (): string => isOriginSecure ? 'a secure' : 'an insecure'],\n  ]);\n}\n\nfunction sameSiteWarnStrictLaxDowngradeStrict(isSecure: boolean): LazyMarkdownIssueDescription {\n  return {\n    file: 'SameSiteWarnStrictLaxDowngradeStrict.md',\n    substitutions: schemefulSameSiteSubstitutions({isDestinationSecure: isSecure, isOriginSecure: !isSecure}),\n    links: schemefulSameSiteArticles,\n  };\n}\n\nfunction sameSiteExcludeNavigationContextDowngrade(isSecure: boolean): LazyMarkdownIssueDescription {\n  return {\n    file: 'SameSiteExcludeNavigationContextDowngrade.md',\n    substitutions: schemefulSameSiteSubstitutions({isDestinationSecure: isSecure, isOriginSecure: !isSecure}),\n    links: schemefulSameSiteArticles,\n  };\n}\n\nfunction sameSiteWarnCrossDowngradeRead(isSecure: boolean): LazyMarkdownIssueDescription {\n  return {\n    file: 'SameSiteWarnCrossDowngradeRead.md',\n    substitutions: schemefulSameSiteSubstitutions({isDestinationSecure: isSecure, isOriginSecure: !isSecure}),\n    links: schemefulSameSiteArticles,\n  };\n}\n\nfunction sameSiteExcludeContextDowngradeRead(isSecure: boolean): LazyMarkdownIssueDescription {\n  return {\n    file: 'SameSiteExcludeContextDowngradeRead.md',\n    substitutions: schemefulSameSiteSubstitutions({isDestinationSecure: isSecure, isOriginSecure: !isSecure}),\n    links: schemefulSameSiteArticles,\n  };\n}\n\nfunction sameSiteWarnCrossDowngradeSet(isSecure: boolean): LazyMarkdownIssueDescription {\n  return {\n    file: 'SameSiteWarnCrossDowngradeSet.md',\n    substitutions: schemefulSameSiteSubstitutions({isDestinationSecure: !isSecure, isOriginSecure: isSecure}),\n    links: schemefulSameSiteArticles,\n  };\n}\n\nfunction sameSiteExcludeContextDowngradeSet(isSecure: boolean): LazyMarkdownIssueDescription {\n  return {\n    file: 'SameSiteExcludeContextDowngradeSet.md',\n    substitutions: schemefulSameSiteSubstitutions({isDestinationSecure: isSecure, isOriginSecure: !isSecure}),\n    links: schemefulSameSiteArticles,\n  };\n}\n\nconst sameSiteInvalidSameParty: LazyMarkdownIssueDescription = {\n  file: 'SameSiteInvalidSameParty.md',\n  links: [{\n    link: 'https://developer.chrome.com/blog/first-party-sets-sameparty/',\n    linkTitle: i18nLazyString(UIStrings.firstPartySetsExplained),\n  }],\n};\n\nconst samePartyCrossPartyContextSet: LazyMarkdownIssueDescription = {\n  file: 'SameSiteSamePartyCrossPartyContextSet.md',\n  links: [{\n    link: 'https://developer.chrome.com/blog/first-party-sets-sameparty/',\n    linkTitle: i18nLazyString(UIStrings.firstPartySetsExplained),\n  }],\n};\n\nconst attributeValueExceedsMaxSize: LazyMarkdownIssueDescription = {\n  file: 'CookieAttributeValueExceedsMaxSize.md',\n  links: [],\n};\n\nconst warnDomainNonAscii: LazyMarkdownIssueDescription = {\n  file: 'cookieWarnDomainNonAscii.md',\n  links: [],\n};\n\nconst excludeDomainNonAscii: LazyMarkdownIssueDescription = {\n  file: 'cookieExcludeDomainNonAscii.md',\n  links: [],\n};\n\nconst excludeBlockedWithinFirstPartySet: LazyMarkdownIssueDescription = {\n  file: 'cookieExcludeBlockedWithinFirstPartySet.md',\n  links: [],\n};\n\nconst issueDescriptions: Map<string, LazyMarkdownIssueDescription> = new Map([\n  ['CookieIssue::ExcludeSameSiteUnspecifiedTreatedAsLax::ReadCookie', sameSiteUnspecifiedErrorRead],\n  ['CookieIssue::ExcludeSameSiteUnspecifiedTreatedAsLax::SetCookie', sameSiteUnspecifiedErrorSet],\n  // These two don't have a deprecation date yet, but they need to be fixed eventually.\n  ['CookieIssue::WarnSameSiteUnspecifiedLaxAllowUnsafe::ReadCookie', sameSiteUnspecifiedWarnRead],\n  ['CookieIssue::WarnSameSiteUnspecifiedLaxAllowUnsafe::SetCookie', sameSiteUnspecifiedWarnSet],\n  ['CookieIssue::WarnSameSiteUnspecifiedCrossSiteContext::ReadCookie', sameSiteUnspecifiedWarnRead],\n  ['CookieIssue::WarnSameSiteUnspecifiedCrossSiteContext::SetCookie', sameSiteUnspecifiedWarnSet],\n  ['CookieIssue::ExcludeSameSiteNoneInsecure::ReadCookie', sameSiteNoneInsecureErrorRead],\n  ['CookieIssue::ExcludeSameSiteNoneInsecure::SetCookie', sameSiteNoneInsecureErrorSet],\n  ['CookieIssue::WarnSameSiteNoneInsecure::ReadCookie', sameSiteNoneInsecureWarnRead],\n  ['CookieIssue::WarnSameSiteNoneInsecure::SetCookie', sameSiteNoneInsecureWarnSet],\n  ['CookieIssue::WarnSameSiteStrictLaxDowngradeStrict::Secure', sameSiteWarnStrictLaxDowngradeStrict(true)],\n  ['CookieIssue::WarnSameSiteStrictLaxDowngradeStrict::Insecure', sameSiteWarnStrictLaxDowngradeStrict(false)],\n  ['CookieIssue::WarnCrossDowngrade::ReadCookie::Secure', sameSiteWarnCrossDowngradeRead(true)],\n  ['CookieIssue::WarnCrossDowngrade::ReadCookie::Insecure', sameSiteWarnCrossDowngradeRead(false)],\n  ['CookieIssue::WarnCrossDowngrade::SetCookie::Secure', sameSiteWarnCrossDowngradeSet(true)],\n  ['CookieIssue::WarnCrossDowngrade::SetCookie::Insecure', sameSiteWarnCrossDowngradeSet(false)],\n  ['CookieIssue::ExcludeNavigationContextDowngrade::Secure', sameSiteExcludeNavigationContextDowngrade(true)],\n  [\n    'CookieIssue::ExcludeNavigationContextDowngrade::Insecure',\n    sameSiteExcludeNavigationContextDowngrade(false),\n  ],\n  ['CookieIssue::ExcludeContextDowngrade::ReadCookie::Secure', sameSiteExcludeContextDowngradeRead(true)],\n  ['CookieIssue::ExcludeContextDowngrade::ReadCookie::Insecure', sameSiteExcludeContextDowngradeRead(false)],\n  ['CookieIssue::ExcludeContextDowngrade::SetCookie::Secure', sameSiteExcludeContextDowngradeSet(true)],\n  ['CookieIssue::ExcludeContextDowngrade::SetCookie::Insecure', sameSiteExcludeContextDowngradeSet(false)],\n  ['CookieIssue::ExcludeInvalidSameParty::SetCookie', sameSiteInvalidSameParty],\n  ['CookieIssue::ExcludeSamePartyCrossPartyContext::SetCookie', samePartyCrossPartyContextSet],\n  ['CookieIssue::WarnAttributeValueExceedsMaxSize::ReadCookie', attributeValueExceedsMaxSize],\n  ['CookieIssue::WarnAttributeValueExceedsMaxSize::SetCookie', attributeValueExceedsMaxSize],\n  ['CookieIssue::WarnDomainNonASCII::ReadCookie', warnDomainNonAscii],\n  ['CookieIssue::WarnDomainNonASCII::SetCookie', warnDomainNonAscii],\n  ['CookieIssue::ExcludeDomainNonASCII::ReadCookie', excludeDomainNonAscii],\n  ['CookieIssue::ExcludeDomainNonASCII::SetCookie', excludeDomainNonAscii],\n  [\n    'CookieIssue::ExcludeThirdPartyCookieBlockedInFirstPartySet::ReadCookie',\n    excludeBlockedWithinFirstPartySet,\n  ],\n  [\n    'CookieIssue::ExcludeThirdPartyCookieBlockedInFirstPartySet::SetCookie',\n    excludeBlockedWithinFirstPartySet,\n  ],\n]);\n"]}