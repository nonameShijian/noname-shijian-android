{"version":3,"file":"TimelinePanel.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelinePanel.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n * Copyright (C) 2012 Intel Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as TimelineModel from '../../models/timeline_model/timeline_model.js';\nimport * as TraceEngine from '../../models/trace/trace.js';\nimport * as PanelFeedback from '../../ui/components/panel_feedback/panel_feedback.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as MobileThrottling from '../mobile_throttling/mobile_throttling.js';\n\nimport historyToolbarButtonStyles from './historyToolbarButton.css.js';\nimport timelinePanelStyles from './timelinePanel.css.js';\nimport timelineStatusDialogStyles from './timelineStatusDialog.css.js';\n\nimport {Events, PerformanceModel, type WindowChangedEvent} from './PerformanceModel.js';\n\nimport {TimelineController, type Client} from './TimelineController.js';\n\nimport {\n  TimelineEventOverviewCPUActivity,\n  TimelineEventOverviewMemory,\n  TimelineEventOverviewNetwork,\n  TimelineEventOverviewResponsiveness,\n  TimelineFilmStripOverview,\n  type TimelineEventOverview,\n} from './TimelineEventOverview.js';\nimport {TimelineFlameChartView} from './TimelineFlameChartView.js';\nimport {TimelineHistoryManager} from './TimelineHistoryManager.js';\nimport {TimelineLoader} from './TimelineLoader.js';\nimport {TimelineUIUtils} from './TimelineUIUtils.js';\nimport {UIDevtoolsController} from './UIDevtoolsController.js';\nimport {UIDevtoolsUtils} from './UIDevtoolsUtils.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport {traceJsonGenerator, cpuprofileJsonGenerator} from './SaveFileFormatter.js';\n\nimport {TimelineSelection} from './TimelineSelection.js';\n\nconst UIStrings = {\n  /**\n   *@description Text that appears when user drag and drop something (for example, a file) in Timeline Panel of the Performance panel\n   */\n  dropTimelineFileOrUrlHere: 'Drop timeline file or URL here',\n  /**\n   *@description Title of disable capture jsprofile setting in timeline panel of the performance panel\n   */\n  disableJavascriptSamples: 'Disable JavaScript samples',\n  /**\n   *@description Title of capture layers and pictures setting in timeline panel of the performance panel\n   */\n  enableAdvancedPaint: 'Enable advanced paint instrumentation (slow)',\n  /**\n   *@description Title of show screenshots setting in timeline panel of the performance panel\n   */\n  screenshots: 'Screenshots',\n  /**\n   *@description Text for the memory of the page\n   */\n  memory: 'Memory',\n  /**\n   *@description Text to clear content\n   */\n  clear: 'Clear',\n  /**\n   *@description Tooltip text that appears when hovering over the largeicon load button\n   */\n  loadProfile: 'Load profile…',\n  /**\n   *@description Tooltip text that appears when hovering over the largeicon download button\n   */\n  saveProfile: 'Save profile…',\n  /**\n   *@description Text to take screenshots\n   */\n  captureScreenshots: 'Capture screenshots',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  showMemoryTimeline: 'Show memory timeline',\n  /**\n   *@description Tooltip text that appears when hovering over the largeicon settings gear in show settings pane setting in timeline panel of the performance panel\n   */\n  captureSettings: 'Capture settings',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  disablesJavascriptSampling: 'Disables JavaScript sampling, reduces overhead when running against mobile devices',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  capturesAdvancedPaint: 'Captures advanced paint instrumentation, introduces significant performance overhead',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  network: 'Network:',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  cpu: 'CPU:',\n  /**\n   *@description Title of the 'Network conditions' tool in the bottom drawer\n   */\n  networkConditions: 'Network conditions',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   *@example {wrong format} PH1\n   *@example {ERROR_FILE_NOT_FOUND} PH2\n   */\n  failedToSaveTimelineSS: 'Failed to save timeline: {PH1} ({PH2})',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  CpuThrottlingIsEnabled: '- CPU throttling is enabled',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  NetworkThrottlingIsEnabled: '- Network throttling is enabled',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  HardwareConcurrencyIsEnabled: '- Hardware concurrency override is enabled',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  SignificantOverheadDueToPaint: '- Significant overhead due to paint instrumentation',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  JavascriptSamplingIsDisabled: '- JavaScript sampling is disabled',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  stoppingTimeline: 'Stopping timeline…',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  received: 'Received',\n  /**\n   *@description Text to close something\n   */\n  close: 'Close',\n  /**\n   *@description Status text to indicate the recording has failed in the Performance panel\n   */\n  recordingFailed: 'Recording failed',\n  /**\n   * @description Text to indicate the progress of a profile. Informs the user that we are currently\n   * creating a peformance profile.\n   */\n  profiling: 'Profiling…',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  bufferUsage: 'Buffer usage',\n  /**\n   *@description Text for an option to learn more about something\n   */\n  learnmore: 'Learn more',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  wasd: 'WASD',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   *@example {record} PH1\n   *@example {Ctrl + R} PH2\n   */\n  clickTheRecordButtonSOrHitSTo: 'Click the record button {PH1} or hit {PH2} to start a new recording.',\n  /**\n   * @description Text in Timeline Panel of the Performance panel\n   * @example {reload button} PH1\n   * @example {Ctrl + R} PH2\n   */\n  clickTheReloadButtonSOrHitSTo: 'Click the reload button {PH1} or hit {PH2} to record the page load.',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   *@example {Ctrl + U} PH1\n   *@example {Learn more} PH2\n   */\n  afterRecordingSelectAnAreaOf:\n      'After recording, select an area of interest in the overview by dragging. Then, zoom and pan the timeline with the mousewheel or {PH1} keys. {PH2}',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  loadingProfile: 'Loading profile…',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  processingProfile: 'Processing profile…',\n  /**\n   *@description Text in Timeline Panel of the Performance panel\n   */\n  initializingProfiler: 'Initializing profiler…',\n  /**\n   *@description Text for the status of something\n   */\n  status: 'Status',\n  /**\n   *@description Text that refers to the time\n   */\n  time: 'Time',\n  /**\n   *@description Text for the description of something\n   */\n  description: 'Description',\n  /**\n   *@description Text of an item that stops the running task\n   */\n  stop: 'Stop',\n  /**\n   *@description Time text content in Timeline Panel of the Performance panel\n   *@example {2.12} PH1\n   */\n  ssec: '{PH1} sec',\n  /**\n   *@description Message shown when a browser recording could not be started.\n   */\n  couldNotStart: 'Could not start recording, please try again later',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/TimelinePanel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nlet timelinePanelInstance: TimelinePanel;\nlet isNode: boolean;\n\n// TypeScript will presumably get these types at some stage, and when it\n// does these temporary types should be removed.\n// TODO: Remove types when available in TypeScript.\ndeclare global {\n  interface FileSystemWritableFileStream extends WritableStream {\n    write(data: unknown): Promise<void>;\n    close(): Promise<void>;\n  }\n\n  interface FileSystemHandle {\n    createWritable(): Promise<FileSystemWritableFileStream>;\n  }\n\n  interface Window {\n    showSaveFilePicker(opts: unknown): Promise<FileSystemHandle>;\n  }\n}\n\nexport class TimelinePanel extends UI.Panel.Panel implements Client, TimelineModeViewDelegate {\n  private readonly dropTarget: UI.DropTarget.DropTarget;\n  private readonly recordingOptionUIControls: UI.Toolbar.ToolbarItem[];\n  private state: State;\n  private recordingPageReload: boolean;\n  private readonly millisecondsToRecordAfterLoadEvent: number;\n  private readonly toggleRecordAction: UI.ActionRegistration.Action;\n  private readonly recordReloadAction: UI.ActionRegistration.Action;\n  private readonly historyManager: TimelineHistoryManager;\n  private performanceModel: PerformanceModel|null;\n  // Cannot be made into an actual private field because the layout tests\n  // currently rely on accessing and setting this value.\n  private filmStripModel: SDK.FilmStripModel.FilmStripModel|null = null;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private disableCaptureJSProfileSetting: Common.Settings.Setting<any>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private readonly captureLayersAndPicturesSetting: Common.Settings.Setting<any>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private showScreenshotsSetting: Common.Settings.Setting<any>;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private showMemorySetting: Common.Settings.Setting<any>;\n  private readonly panelToolbar: UI.Toolbar.Toolbar;\n  private readonly panelRightToolbar: UI.Toolbar.Toolbar;\n  private readonly timelinePane: UI.Widget.VBox;\n  private readonly overviewPane: PerfUI.TimelineOverviewPane.TimelineOverviewPane;\n  private overviewControls: TimelineEventOverview[];\n  private readonly statusPaneContainer: HTMLElement;\n  private readonly flameChart: TimelineFlameChartView;\n  private readonly searchableViewInternal: UI.SearchableView.SearchableView;\n  private showSettingsPaneButton!: UI.Toolbar.ToolbarSettingToggle;\n  private showSettingsPaneSetting!: Common.Settings.Setting<boolean>;\n  private settingsPane!: UI.Widget.Widget;\n  private controller!: TimelineController|null;\n  private cpuProfiler!: SDK.CPUProfilerModel.CPUProfilerModel|null;\n  private clearButton!: UI.Toolbar.ToolbarButton;\n  private loadButton!: UI.Toolbar.ToolbarButton;\n  private saveButton!: UI.Toolbar.ToolbarButton;\n  private statusPane!: StatusPane|null;\n  private landingPage!: UI.Widget.Widget;\n  private loader?: TimelineLoader;\n  private showScreenshotsToolbarCheckbox?: UI.Toolbar.ToolbarItem;\n  private showMemoryToolbarCheckbox?: UI.Toolbar.ToolbarItem;\n  private networkThrottlingSelect?: UI.Toolbar.ToolbarComboBox;\n  private cpuThrottlingSelect?: UI.Toolbar.ToolbarComboBox;\n  private fileSelectorElement?: HTMLInputElement;\n  private selection?: TimelineSelection|null;\n  private primaryPageTargetPromiseCallback = (_target: SDK.Target.Target): void => {};\n  private primaryPageTargetPromise = new Promise<SDK.Target.Target>(res => {\n    this.primaryPageTargetPromiseCallback = res;\n  });\n\n  #traceEngineModel: TraceEngine.TraceModel.Model<typeof TraceEngine.Handlers.Migration.ENABLED_TRACE_HANDLERS>;\n  // Tracks the index of the trace that the user is currently viewing.\n  #traceEngineActiveTraceIndex = -1;\n  constructor() {\n    super('timeline');\n    this.#traceEngineModel = TraceEngine.TraceModel.Model.createWithRequiredHandlersForMigration();\n    this.element.addEventListener('contextmenu', this.contextMenu.bind(this), false);\n    this.dropTarget = new UI.DropTarget.DropTarget(\n        this.element, [UI.DropTarget.Type.File, UI.DropTarget.Type.URI],\n        i18nString(UIStrings.dropTimelineFileOrUrlHere), this.handleDrop.bind(this));\n\n    this.recordingOptionUIControls = [];\n    this.state = State.Idle;\n    this.recordingPageReload = false;\n    this.millisecondsToRecordAfterLoadEvent = 5000;\n    this.toggleRecordAction =\n        (UI.ActionRegistry.ActionRegistry.instance().action('timeline.toggle-recording') as\n         UI.ActionRegistration.Action);\n    this.recordReloadAction =\n        (UI.ActionRegistry.ActionRegistry.instance().action('timeline.record-reload') as UI.ActionRegistration.Action);\n\n    this.historyManager = new TimelineHistoryManager();\n\n    this.performanceModel = null;\n\n    this.disableCaptureJSProfileSetting =\n        Common.Settings.Settings.instance().createSetting('timelineDisableJSSampling', false);\n    this.disableCaptureJSProfileSetting.setTitle(i18nString(UIStrings.disableJavascriptSamples));\n    this.captureLayersAndPicturesSetting =\n        Common.Settings.Settings.instance().createSetting('timelineCaptureLayersAndPictures', false);\n    this.captureLayersAndPicturesSetting.setTitle(i18nString(UIStrings.enableAdvancedPaint));\n\n    this.showScreenshotsSetting =\n        Common.Settings.Settings.instance().createSetting('timelineShowScreenshots', isNode ? false : true);\n    this.showScreenshotsSetting.setTitle(i18nString(UIStrings.screenshots));\n    this.showScreenshotsSetting.addChangeListener(this.updateOverviewControls, this);\n\n    this.showMemorySetting = Common.Settings.Settings.instance().createSetting('timelineShowMemory', false);\n    this.showMemorySetting.setTitle(i18nString(UIStrings.memory));\n    this.showMemorySetting.addChangeListener(this.onModeChanged, this);\n\n    const timelineToolbarContainer = this.element.createChild('div', 'timeline-toolbar-container');\n    this.panelToolbar = new UI.Toolbar.Toolbar('timeline-main-toolbar', timelineToolbarContainer);\n    this.panelToolbar.makeWrappable(true);\n    this.panelRightToolbar = new UI.Toolbar.Toolbar('', timelineToolbarContainer);\n    if (!isNode) {\n      this.createSettingsPane();\n      this.updateShowSettingsToolbarButton();\n    }\n    this.timelinePane = new UI.Widget.VBox();\n    this.timelinePane.show(this.element);\n    const topPaneElement = this.timelinePane.element.createChild('div', 'hbox');\n    topPaneElement.id = 'timeline-overview-panel';\n\n    // Create top overview component.\n    this.overviewPane = new PerfUI.TimelineOverviewPane.TimelineOverviewPane('timeline');\n    this.overviewPane.addEventListener(\n        PerfUI.TimelineOverviewPane.Events.WindowChanged, this.onOverviewWindowChanged.bind(this));\n    this.overviewPane.show(topPaneElement);\n    this.overviewControls = [];\n\n    this.statusPaneContainer = this.timelinePane.element.createChild('div', 'status-pane-container fill');\n\n    this.createFileSelector();\n\n    SDK.TargetManager.TargetManager.instance().addModelListener(\n        SDK.ResourceTreeModel.ResourceTreeModel, SDK.ResourceTreeModel.Events.Load, this.loadEventFired, this);\n\n    this.flameChart = new TimelineFlameChartView(this);\n    this.searchableViewInternal = new UI.SearchableView.SearchableView(this.flameChart, null);\n    this.searchableViewInternal.setMinimumSize(0, 100);\n    this.searchableViewInternal.element.classList.add('searchable-view');\n    this.searchableViewInternal.show(this.timelinePane.element);\n    this.flameChart.show(this.searchableViewInternal.element);\n    this.flameChart.setSearchableView(this.searchableViewInternal);\n    this.searchableViewInternal.hideWidget();\n\n    this.onModeChanged();\n    this.populateToolbar();\n    this.showLandingPage();\n    this.updateTimelineControls();\n\n    SDK.TargetManager.TargetManager.instance().addEventListener(\n        SDK.TargetManager.Events.SuspendStateChanged, this.onSuspendStateChanged, this);\n    if (Root.Runtime.experiments.isEnabled('timelineAsConsoleProfileResultPanel')) {\n      const profilerModels = SDK.TargetManager.TargetManager.instance().models(SDK.CPUProfilerModel.CPUProfilerModel);\n      for (const model of profilerModels) {\n        for (const message of model.registeredConsoleProfileMessages) {\n          this.consoleProfileFinished(message);\n        }\n      }\n      SDK.TargetManager.TargetManager.instance().observeModels(\n          SDK.CPUProfilerModel.CPUProfilerModel,\n          {\n            modelAdded: (model: SDK.CPUProfilerModel.CPUProfilerModel) => {\n              model.addEventListener(\n                  SDK.CPUProfilerModel.Events.ConsoleProfileFinished, event => this.consoleProfileFinished(event.data));\n            },\n            modelRemoved: (_model: SDK.CPUProfilerModel.CPUProfilerModel) => {\n\n            },\n          },\n      );\n    }\n    SDK.TargetManager.TargetManager.instance().observeTargets({\n      targetAdded: (target: SDK.Target.Target) => {\n        if (target !== SDK.TargetManager.TargetManager.instance().primaryPageTarget()) {\n          return;\n        }\n        this.primaryPageTargetPromiseCallback(target);\n      },\n      targetRemoved: (_: SDK.Target.Target) => {},\n    });\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    isNode: boolean,\n  }|undefined = {forceNew: null, isNode: false}): TimelinePanel {\n    const {forceNew, isNode: isNodeMode} = opts;\n    isNode = isNodeMode;\n\n    if (!timelinePanelInstance || forceNew) {\n      timelinePanelInstance = new TimelinePanel();\n    }\n\n    return timelinePanelInstance;\n  }\n\n  override searchableView(): UI.SearchableView.SearchableView|null {\n    return this.searchableViewInternal;\n  }\n\n  override wasShown(): void {\n    super.wasShown();\n    UI.Context.Context.instance().setFlavor(TimelinePanel, this);\n    this.registerCSSFiles([timelinePanelStyles]);\n    // Record the performance tool load time.\n    Host.userMetrics.panelLoaded('timeline', 'DevTools.Launch.Timeline');\n  }\n\n  override willHide(): void {\n    UI.Context.Context.instance().setFlavor(TimelinePanel, null);\n    this.historyManager.cancelIfShowing();\n  }\n\n  loadFromEvents(events: SDK.TracingManager.EventPayload[]): void {\n    if (this.state !== State.Idle) {\n      return;\n    }\n    this.prepareToLoadTimeline();\n    this.loader = TimelineLoader.loadFromEvents(events, this);\n  }\n\n  private loadFromCpuProfile(profile: Protocol.Profiler.Profile|null, title?: string): void {\n    if (this.state !== State.Idle) {\n      return;\n    }\n    this.prepareToLoadTimeline();\n    this.loader = TimelineLoader.loadFromCpuProfile(profile, this, title);\n  }\n\n  private onOverviewWindowChanged(\n      event: Common.EventTarget.EventTargetEvent<PerfUI.TimelineOverviewPane.WindowChangedEvent>): void {\n    if (!this.performanceModel) {\n      return;\n    }\n    const left = event.data.startTime;\n    const right = event.data.endTime;\n    this.performanceModel.setWindow({left, right}, /* animate */ true);\n  }\n\n  private onModelWindowChanged(event: Common.EventTarget.EventTargetEvent<WindowChangedEvent>): void {\n    const window = event.data.window;\n    this.overviewPane.setWindowTimes(window.left, window.right);\n  }\n\n  private setState(state: State): void {\n    this.state = state;\n    this.updateTimelineControls();\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private createSettingCheckbox(setting: Common.Settings.Setting<any>, tooltip: string): UI.Toolbar.ToolbarItem {\n    const checkboxItem = new UI.Toolbar.ToolbarSettingCheckbox(setting, tooltip);\n    this.recordingOptionUIControls.push(checkboxItem);\n    return checkboxItem;\n  }\n\n  private populateToolbar(): void {\n    // Record\n    this.panelToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.toggleRecordAction));\n    this.panelToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButton(this.recordReloadAction));\n    this.clearButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.clear), 'clear');\n    this.clearButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => this.onClearButton());\n    this.panelToolbar.appendToolbarItem(this.clearButton);\n\n    // Load / Save\n    this.loadButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.loadProfile), 'import');\n    this.loadButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.PerfPanelTraceImported);\n      this.selectFileToLoad();\n    });\n    this.saveButton = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.saveProfile), 'download');\n    this.saveButton.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, _event => {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.PerfPanelTraceExported);\n      void this.saveToFile();\n    });\n    this.panelToolbar.appendSeparator();\n    this.panelToolbar.appendToolbarItem(this.loadButton);\n    this.panelToolbar.appendToolbarItem(this.saveButton);\n\n    // History\n    this.panelToolbar.appendSeparator();\n    this.panelToolbar.appendToolbarItem(this.historyManager.button());\n    this.panelToolbar.registerCSSFiles([historyToolbarButtonStyles]);\n    this.panelToolbar.appendSeparator();\n\n    // View\n    this.panelToolbar.appendSeparator();\n    if (!isNode) {\n      this.showScreenshotsToolbarCheckbox =\n          this.createSettingCheckbox(this.showScreenshotsSetting, i18nString(UIStrings.captureScreenshots));\n      this.panelToolbar.appendToolbarItem(this.showScreenshotsToolbarCheckbox);\n    }\n\n    this.showMemoryToolbarCheckbox =\n        this.createSettingCheckbox(this.showMemorySetting, i18nString(UIStrings.showMemoryTimeline));\n    this.panelToolbar.appendToolbarItem(this.showMemoryToolbarCheckbox);\n\n    // GC\n    this.panelToolbar.appendToolbarItem(UI.Toolbar.Toolbar.createActionButtonForId('components.collect-garbage'));\n\n    // Settings\n    if (!isNode) {\n      this.panelRightToolbar.appendSeparator();\n      this.panelRightToolbar.appendToolbarItem(this.showSettingsPaneButton);\n    }\n  }\n\n  private createSettingsPane(): void {\n    this.showSettingsPaneSetting =\n        Common.Settings.Settings.instance().createSetting('timelineShowSettingsToolbar', false);\n    this.showSettingsPaneButton = new UI.Toolbar.ToolbarSettingToggle(\n        this.showSettingsPaneSetting, 'gear', i18nString(UIStrings.captureSettings), 'gear-filled');\n    SDK.NetworkManager.MultitargetNetworkManager.instance().addEventListener(\n        SDK.NetworkManager.MultitargetNetworkManager.Events.ConditionsChanged, this.updateShowSettingsToolbarButton,\n        this);\n    SDK.CPUThrottlingManager.CPUThrottlingManager.instance().addEventListener(\n        SDK.CPUThrottlingManager.Events.RateChanged, this.updateShowSettingsToolbarButton, this);\n    SDK.CPUThrottlingManager.CPUThrottlingManager.instance().addEventListener(\n        SDK.CPUThrottlingManager.Events.HardwareConcurrencyChanged, this.updateShowSettingsToolbarButton, this);\n    this.disableCaptureJSProfileSetting.addChangeListener(this.updateShowSettingsToolbarButton, this);\n    this.captureLayersAndPicturesSetting.addChangeListener(this.updateShowSettingsToolbarButton, this);\n\n    this.settingsPane = new UI.Widget.HBox();\n    this.settingsPane.element.classList.add('timeline-settings-pane');\n    this.settingsPane.show(this.element);\n\n    const captureToolbar = new UI.Toolbar.Toolbar('', this.settingsPane.element);\n    captureToolbar.element.classList.add('flex-auto');\n    captureToolbar.makeVertical();\n    captureToolbar.appendToolbarItem(this.createSettingCheckbox(\n        this.disableCaptureJSProfileSetting, i18nString(UIStrings.disablesJavascriptSampling)));\n    captureToolbar.appendToolbarItem(\n        this.createSettingCheckbox(this.captureLayersAndPicturesSetting, i18nString(UIStrings.capturesAdvancedPaint)));\n\n    const throttlingPane = new UI.Widget.VBox();\n    throttlingPane.element.classList.add('flex-auto');\n    throttlingPane.show(this.settingsPane.element);\n\n    const cpuThrottlingToolbar = new UI.Toolbar.Toolbar('', throttlingPane.element);\n    cpuThrottlingToolbar.appendText(i18nString(UIStrings.cpu));\n    this.cpuThrottlingSelect = MobileThrottling.ThrottlingManager.throttlingManager().createCPUThrottlingSelector();\n    cpuThrottlingToolbar.appendToolbarItem(this.cpuThrottlingSelect);\n\n    const networkThrottlingToolbar = new UI.Toolbar.Toolbar('', throttlingPane.element);\n    networkThrottlingToolbar.appendText(i18nString(UIStrings.network));\n    this.networkThrottlingSelect = this.createNetworkConditionsSelect();\n    networkThrottlingToolbar.appendToolbarItem(this.networkThrottlingSelect);\n\n    const hardwareConcurrencyPane = new UI.Widget.VBox();\n    hardwareConcurrencyPane.element.classList.add('flex-auto');\n    hardwareConcurrencyPane.show(this.settingsPane.element);\n\n    const {toggle, input, reset, warning} =\n        MobileThrottling.ThrottlingManager.throttlingManager().createHardwareConcurrencySelector();\n    const concurrencyThrottlingToolbar = new UI.Toolbar.Toolbar('', hardwareConcurrencyPane.element);\n    concurrencyThrottlingToolbar.registerCSSFiles([timelinePanelStyles]);\n    input.element.classList.add('timeline-concurrency-input');\n    concurrencyThrottlingToolbar.appendToolbarItem(toggle);\n    concurrencyThrottlingToolbar.appendToolbarItem(input);\n    concurrencyThrottlingToolbar.appendToolbarItem(reset);\n    concurrencyThrottlingToolbar.appendToolbarItem(warning);\n\n    this.showSettingsPaneSetting.addChangeListener(this.updateSettingsPaneVisibility.bind(this));\n    this.updateSettingsPaneVisibility();\n  }\n\n  private createNetworkConditionsSelect(): UI.Toolbar.ToolbarComboBox {\n    const toolbarItem = new UI.Toolbar.ToolbarComboBox(null, i18nString(UIStrings.networkConditions));\n    toolbarItem.setMaxWidth(140);\n    MobileThrottling.ThrottlingManager.throttlingManager().decorateSelectWithNetworkThrottling(\n        toolbarItem.selectElement());\n    return toolbarItem;\n  }\n\n  private prepareToLoadTimeline(): void {\n    console.assert(this.state === State.Idle);\n    this.setState(State.Loading);\n    if (this.performanceModel) {\n      this.performanceModel = null;\n    }\n  }\n\n  private createFileSelector(): void {\n    if (this.fileSelectorElement) {\n      this.fileSelectorElement.remove();\n    }\n    this.fileSelectorElement = UI.UIUtils.createFileSelectorElement(this.loadFromFile.bind(this));\n    this.timelinePane.element.appendChild(this.fileSelectorElement);\n  }\n\n  private contextMenu(event: Event): void {\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    contextMenu.appendItemsAtLocation('timelineMenu');\n    void contextMenu.show();\n  }\n\n  async saveToFile(): Promise<void> {\n    if (this.state !== State.Idle) {\n      return;\n    }\n    const performanceModel = this.performanceModel;\n    if (!performanceModel) {\n      return;\n    }\n\n    const traceEvents = this.#traceEngineModel.traceEvents(this.#traceEngineActiveTraceIndex);\n    const metadata = this.#traceEngineModel.metadata(this.#traceEngineActiveTraceIndex);\n    if (!traceEvents) {\n      return;\n    }\n\n    const traceStart = Platform.DateUtilities.toISO8601Compact(new Date());\n    let fileName: Platform.DevToolsPath.RawPathString;\n    if (isNode) {\n      fileName = `CPU-${traceStart}.cpuprofile` as Platform.DevToolsPath.RawPathString;\n    } else {\n      fileName = `Trace-${traceStart}.json` as Platform.DevToolsPath.RawPathString;\n    }\n\n    try {\n      const handler = await window.showSaveFilePicker({\n        suggestedName: fileName,\n      });\n      const encoder = new TextEncoder();\n\n      // TODO(crbug.com/1456818): Extract this logic and add more tests.\n      let traceAsString;\n      if (isNode) {\n        const profileEvent = traceEvents.find(e => e.name === 'CpuProfile');\n        if (!profileEvent || !profileEvent.args?.data) {\n          return;\n        }\n        const profileEventData = profileEvent.args?.data;\n        if (profileEventData.hasOwnProperty('cpuProfile')) {\n          // TODO(crbug.com/1456799): Currently use a hack way because we can't differentiate\n          // cpuprofile from trace events when loading a file.\n          // The loader will directly add the fake trace created from CpuProfile to the tracingModel.\n          // And there is where the old saving logic saves the cpuprofile.\n          // This will be solved when the CPUProfileHandler is done. Then we can directly get it\n          // from the new traceEngine\n          const profile = (profileEventData as {cpuProfile: Protocol.Profiler.Profile}).cpuProfile;\n          traceAsString = cpuprofileJsonGenerator(profile as Protocol.Profiler.Profile);\n        }\n      } else {\n        const formattedTraceIter = traceJsonGenerator(traceEvents, metadata);\n        traceAsString = Array.from(formattedTraceIter).join('');\n      }\n      const buffer = encoder.encode(traceAsString);\n      const writable = await handler.createWritable();\n      await writable.write(buffer);\n      await writable.close();\n    } catch (error) {\n      console.error(error.stack);\n      if (error.name === 'AbortError') {\n        // The user cancelled the action, so this is not an error we need to report.\n        return;\n      }\n      Common.Console.Console.instance().error(\n          i18nString(UIStrings.failedToSaveTimelineSS, {PH1: error.message, PH2: error.name}));\n    }\n  }\n\n  async showHistory(): Promise<void> {\n    const recordingData = await this.historyManager.showHistoryDropDown();\n    if (recordingData && recordingData.legacyModel !== this.performanceModel) {\n      this.setModel(recordingData.legacyModel, /* exclusiveFilter= */ null, recordingData.traceParseData);\n    }\n  }\n\n  navigateHistory(direction: number): boolean {\n    const recordingData = this.historyManager.navigate(direction);\n    if (recordingData && recordingData.legacyModel !== this.performanceModel) {\n      this.setModel(recordingData.legacyModel, /* exclusiveFilter= */ null, recordingData.traceParseData);\n    }\n    return true;\n  }\n\n  selectFileToLoad(): void {\n    if (this.fileSelectorElement) {\n      this.fileSelectorElement.click();\n    }\n  }\n\n  async loadFromFile(file: File): Promise<void> {\n    if (this.state !== State.Idle) {\n      return;\n    }\n    this.prepareToLoadTimeline();\n    this.loader = await TimelineLoader.loadFromFile(file, this);\n    this.createFileSelector();\n  }\n\n  async loadFromURL(url: Platform.DevToolsPath.UrlString): Promise<void> {\n    if (this.state !== State.Idle) {\n      return;\n    }\n    this.prepareToLoadTimeline();\n    this.loader = await TimelineLoader.loadFromURL(url, this);\n  }\n\n  private updateOverviewControls(): void {\n    this.overviewControls = [];\n    this.overviewControls.push(new TimelineEventOverviewResponsiveness());\n    this.overviewControls.push(new TimelineEventOverviewCPUActivity());\n    this.overviewControls.push(new TimelineEventOverviewNetwork());\n    if (this.showScreenshotsSetting.get() && this.filmStripModel && this.filmStripModel.frames().length) {\n      this.overviewControls.push(new TimelineFilmStripOverview(this.filmStripModel));\n    }\n    if (this.showMemorySetting.get()) {\n      this.overviewControls.push(new TimelineEventOverviewMemory());\n    }\n    for (const control of this.overviewControls) {\n      control.setModel(this.performanceModel);\n    }\n    this.overviewPane.setOverviewControls(this.overviewControls);\n  }\n\n  private onModeChanged(): void {\n    this.updateOverviewControls();\n    this.doResize();\n    this.select(null);\n  }\n\n  private updateSettingsPaneVisibility(): void {\n    if (this.showSettingsPaneSetting.get()) {\n      this.settingsPane.showWidget();\n    } else {\n      this.settingsPane.hideWidget();\n    }\n  }\n\n  private updateShowSettingsToolbarButton(): void {\n    const messages: string[] = [];\n    if (SDK.CPUThrottlingManager.CPUThrottlingManager.instance().cpuThrottlingRate() !== 1) {\n      messages.push(i18nString(UIStrings.CpuThrottlingIsEnabled));\n    }\n    if (MobileThrottling.ThrottlingManager.throttlingManager().hardwareConcurrencyOverrideEnabled) {\n      messages.push(i18nString(UIStrings.HardwareConcurrencyIsEnabled));\n    }\n    if (SDK.NetworkManager.MultitargetNetworkManager.instance().isThrottling()) {\n      messages.push(i18nString(UIStrings.NetworkThrottlingIsEnabled));\n    }\n    if (this.captureLayersAndPicturesSetting.get()) {\n      messages.push(i18nString(UIStrings.SignificantOverheadDueToPaint));\n    }\n    if (this.disableCaptureJSProfileSetting.get()) {\n      messages.push(i18nString(UIStrings.JavascriptSamplingIsDisabled));\n    }\n\n    this.showSettingsPaneButton.setDefaultWithRedColor(messages.length > 0);\n    this.showSettingsPaneButton.setToggleWithRedColor(messages.length > 0);\n\n    if (messages.length) {\n      const tooltipElement = document.createElement('div');\n      messages.forEach(message => {\n        tooltipElement.createChild('div').textContent = message;\n      });\n      this.showSettingsPaneButton.setTitle(tooltipElement.textContent || '');\n    } else {\n      this.showSettingsPaneButton.setTitle(i18nString(UIStrings.captureSettings));\n    }\n  }\n\n  private setUIControlsEnabled(enabled: boolean): void {\n    this.recordingOptionUIControls.forEach(control => control.setEnabled(enabled));\n  }\n\n  async #evaluateInspectedURL(): Promise<Platform.DevToolsPath.UrlString> {\n    if (!this.controller) {\n      return Platform.DevToolsPath.EmptyUrlString;\n    }\n    const mainTarget = this.controller.mainTarget();\n    // target.inspectedURL is reliably populated, however it lacks any url #hash\n    const inspectedURL = mainTarget.inspectedURL();\n\n    // We'll use the navigationHistory to acquire the current URL including hash\n    const resourceTreeModel = mainTarget.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    const navHistory = resourceTreeModel && await resourceTreeModel.navigationHistory();\n    if (!resourceTreeModel || !navHistory) {\n      return inspectedURL;\n    }\n\n    const {currentIndex, entries} = navHistory;\n    const navigationEntry = entries[currentIndex];\n    return navigationEntry.url as Platform.DevToolsPath.UrlString;\n  }\n\n  async #navigateToAboutBlank(): Promise<void> {\n    const aboutBlankNavigationComplete = new Promise<void>(async (resolve, reject) => {\n      if (!this.controller) {\n        reject('Could not find TimelineController');\n        return;\n      }\n      const target = this.controller.mainTarget();\n      const resourceModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      if (!resourceModel) {\n        reject('Could not load resourceModel');\n        return;\n      }\n\n      // To clear out the page and any state from prior test runs, we\n      // navigate to about:blank before initiating the trace recording.\n      // Once we have navigated to about:blank, we start recording and\n      // then navigate to the original page URL, to ensure we profile the\n      // page load.\n      function waitForAboutBlank(event: Common.EventTarget.EventTargetEvent<SDK.ResourceTreeModel.ResourceTreeFrame>):\n          void {\n        if (event.data.url === 'about:blank') {\n          resolve();\n        } else {\n          reject(`Unexpected navigation to ${event.data.url}`);\n        }\n        resourceModel?.removeEventListener(SDK.ResourceTreeModel.Events.FrameNavigated, waitForAboutBlank);\n      }\n      resourceModel.addEventListener(SDK.ResourceTreeModel.Events.FrameNavigated, waitForAboutBlank);\n      await resourceModel.navigate('about:blank' as Platform.DevToolsPath.UrlString);\n    });\n    await aboutBlankNavigationComplete;\n  }\n\n  private async startRecording(): Promise<void> {\n    console.assert(!this.statusPane, 'Status pane is already opened.');\n    this.setState(State.StartPending);\n\n    if (!isNode) {\n      const recordingOptions = {\n        enableJSSampling: !this.disableCaptureJSProfileSetting.get(),\n        capturePictures: this.captureLayersAndPicturesSetting.get(),\n        captureFilmStrip: this.showScreenshotsSetting.get(),\n      };\n\n      this.showRecordingStarted();\n\n      const MAX_WAIT_FOR_TARGET_MS = 2000;\n      const timeoutPromise = new Promise(res => setTimeout(res, MAX_WAIT_FOR_TARGET_MS));\n      const primaryPageTarget = await Promise.race([this.primaryPageTargetPromise, timeoutPromise]);\n      if (!(primaryPageTarget instanceof SDK.Target.Target)) {\n        this.recordingFailed(i18nString(UIStrings.couldNotStart));\n        return;\n      }\n\n      if (UIDevtoolsUtils.isUiDevTools()) {\n        this.controller = new UIDevtoolsController(primaryPageTarget, this);\n      } else {\n        this.controller = new TimelineController(primaryPageTarget, this);\n      }\n      this.setUIControlsEnabled(false);\n      this.hideLandingPage();\n      if (!this.controller) {\n        throw new Error('Could not create Timeline controller');\n      }\n\n      const urlToTrace = await this.#evaluateInspectedURL();\n\n      try {\n        // If we are doing \"Reload & record\", we first navigate the page to\n        // about:blank. This is to ensure any data on the timeline from any\n        // previous performance recording is lost, avoiding the problem where a\n        // timeline will show data & screenshots from a previous page load that\n        // was not relevant.\n        if (this.recordingPageReload) {\n          await this.#navigateToAboutBlank();\n        }\n        // Order is important here: we tell the controller to start recording, which enables tracing.\n        const response = await this.controller.startRecording(recordingOptions);\n        if (response.getError()) {\n          throw new Error(response.getError());\n        }\n        // Once we get here, we know tracing is active.\n        // This is when, if the user has hit \"Reload & Record\" that we now need to navigate to the original URL.\n        // If the user has just hit \"record\", we don't do any navigating.\n        const recordingConfig = this.recordingPageReload ? {navigateToUrl: urlToTrace} : undefined;\n        this.recordingStarted(recordingConfig);\n      } catch (e) {\n        this.recordingFailed(e.message);\n      }\n    } else {\n      this.showRecordingStarted();\n      // Only profile the first target devtools connects to. If we profile all target, but this will cause some bugs\n      // like time for the function is calculated wrong, because the profiles will be concated and sorted together,\n      // so the total time will be amplified.\n      // Multiple targets problem might happen when you inspect multiple node servers on different port at same time,\n      // or when you let DevTools listen to both locolhost:9229 & 127.0.0.1:9229.\n      const firstNodeTarget =\n          SDK.TargetManager.TargetManager.instance().targets().find(target => target.type() === SDK.Target.Type.Node);\n      if (firstNodeTarget) {\n        this.cpuProfiler = firstNodeTarget.model(SDK.CPUProfilerModel.CPUProfilerModel);\n      }\n      if (this.cpuProfiler) {\n        this.setUIControlsEnabled(false);\n        this.hideLandingPage();\n\n        await SDK.TargetManager.TargetManager.instance().suspendAllTargets('performance-timeline');\n        await this.cpuProfiler.startRecording();\n\n        this.recordingStarted();\n      }\n    }\n  }\n\n  private async stopRecording(): Promise<void> {\n    if (this.statusPane) {\n      this.statusPane.finish();\n      this.statusPane.updateStatus(i18nString(UIStrings.stoppingTimeline));\n      this.statusPane.updateProgressBar(i18nString(UIStrings.received), 0);\n    }\n    this.setState(State.StopPending);\n    if (this.controller) {\n      this.performanceModel = this.controller.getPerformanceModel();\n      await this.controller.stopRecording();\n      this.setUIControlsEnabled(true);\n      this.controller.dispose();\n      this.controller = null;\n      return;\n    }\n    if (this.cpuProfiler) {\n      const profile = await this.cpuProfiler.stopRecording();\n      this.setState(State.Idle);\n      this.loadFromCpuProfile(profile);\n\n      this.setUIControlsEnabled(true);\n      this.cpuProfiler = null;\n\n      await SDK.TargetManager.TargetManager.instance().resumeAllTargets();\n    }\n  }\n\n  private recordingFailed(error: string): void {\n    if (this.statusPane) {\n      this.statusPane.remove();\n    }\n    this.statusPane = new StatusPane(\n        {\n          description: error,\n          buttonText: i18nString(UIStrings.close),\n          buttonDisabled: false,\n          showProgress: undefined,\n          showTimer: undefined,\n        },\n        () => this.loadingComplete(null));\n    this.statusPane.showPane(this.statusPaneContainer);\n    this.statusPane.updateStatus(i18nString(UIStrings.recordingFailed));\n\n    this.setState(State.RecordingFailed);\n    this.performanceModel = null;\n    this.setUIControlsEnabled(true);\n    if (this.controller) {\n      this.controller.dispose();\n      this.controller = null;\n    }\n  }\n\n  private onSuspendStateChanged(): void {\n    this.updateTimelineControls();\n  }\n\n  private consoleProfileFinished(data: SDK.CPUProfilerModel.ProfileFinishedData): void {\n    this.loadFromCpuProfile(data.cpuProfile, data.title);\n    void UI.InspectorView.InspectorView.instance().showPanel('timeline');\n  }\n\n  private updateTimelineControls(): void {\n    const state = State;\n    this.toggleRecordAction.setToggled(this.state === state.Recording);\n    this.toggleRecordAction.setEnabled(this.state === state.Recording || this.state === state.Idle);\n    this.recordReloadAction.setEnabled(isNode ? false : this.state === state.Idle);\n    this.historyManager.setEnabled(this.state === state.Idle);\n    this.clearButton.setEnabled(this.state === state.Idle);\n    this.panelToolbar.setEnabled(this.state !== state.Loading);\n    this.panelRightToolbar.setEnabled(this.state !== state.Loading);\n    this.dropTarget.setEnabled(this.state === state.Idle);\n    this.loadButton.setEnabled(this.state === state.Idle);\n    this.saveButton.setEnabled(this.state === state.Idle && Boolean(this.performanceModel));\n  }\n\n  async toggleRecording(): Promise<void> {\n    if (this.state === State.Idle) {\n      this.recordingPageReload = false;\n      await this.startRecording();\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.TimelineStarted);\n    } else if (this.state === State.Recording) {\n      await this.stopRecording();\n    }\n  }\n\n  recordReload(): void {\n    if (this.state !== State.Idle) {\n      return;\n    }\n    this.recordingPageReload = true;\n    void this.startRecording();\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.TimelinePageReloadStarted);\n  }\n\n  private onClearButton(): void {\n    this.historyManager.clear();\n    this.clear();\n  }\n\n  private clear(): void {\n    this.showLandingPage();\n    this.reset();\n  }\n\n  private reset(): void {\n    PerfUI.LineLevelProfile.Performance.instance().reset();\n    if (this.performanceModel) {\n      this.performanceModel.removeEventListener(Events.NamesResolved, this.updateModelAndFlameChart, this);\n    }\n    this.setModel(null);\n  }\n\n  private applyFilters(\n      model: PerformanceModel,\n      exclusiveFilter: TimelineModel.TimelineModelFilter.TimelineModelFilter|null = null): void {\n    if (model.timelineModel().isGenericTrace() || Root.Runtime.experiments.isEnabled('timelineShowAllEvents')) {\n      return;\n    }\n    model.setFilters(exclusiveFilter ? [exclusiveFilter] : [TimelineUIUtils.visibleEventsFilter()]);\n  }\n\n  private setModel(\n      model: PerformanceModel|null, exclusiveFilter: TimelineModel.TimelineModelFilter.TimelineModelFilter|null = null,\n      newTraceEngineData: TraceEngine.Handlers.Migration.PartialTraceData|null = null,\n      filmStripModel: SDK.FilmStripModel.FilmStripModel|null = null): void {\n    if (this.performanceModel) {\n      this.performanceModel.removeEventListener(Events.WindowChanged, this.onModelWindowChanged, this);\n    }\n    this.performanceModel = model;\n    if (model) {\n      this.searchableViewInternal.showWidget();\n      this.applyFilters(model, exclusiveFilter);\n    } else {\n      this.searchableViewInternal.hideWidget();\n    }\n    this.flameChart.setModel(model, newTraceEngineData, filmStripModel);\n\n    this.updateOverviewControls();\n    this.overviewPane.reset();\n    if (model && this.performanceModel) {\n      this.performanceModel.addEventListener(Events.WindowChanged, this.onModelWindowChanged, this);\n      this.overviewPane.setNavStartTimes(model.timelineModel().navStartTimes());\n      this.overviewPane.setBounds(model.timelineModel().minimumRecordTime(), model.timelineModel().maximumRecordTime());\n      PerfUI.LineLevelProfile.Performance.instance().reset();\n      for (const profile of model.timelineModel().cpuProfiles()) {\n        PerfUI.LineLevelProfile.Performance.instance().appendCPUProfile(profile);\n      }\n      this.setMarkers(model.timelineModel());\n      this.flameChart.setSelection(null);\n      this.overviewPane.setWindowTimes(model.window().left, model.window().right);\n    }\n    for (const control of this.overviewControls) {\n      control.setModel(model);\n    }\n    if (this.flameChart) {\n      this.flameChart.resizeToPreferredHeights();\n    }\n    this.updateTimelineControls();\n  }\n\n  private recordingStarted(config?: {navigateToUrl: Platform.DevToolsPath.UrlString}): void {\n    if (config && this.recordingPageReload && this.controller) {\n      // If the user hit \"Reload & record\", by this point we have:\n      // 1. Navigated to about:blank\n      // 2. Initiated tracing.\n      // We therefore now should navigate back to the original URL that the user wants to profile.\n      const target = this.controller.mainTarget();\n      const resourceModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n      if (!resourceModel) {\n        this.recordingFailed('Could not navigate to original URL');\n        return;\n      }\n      // We don't need to await this because we are purposefully showing UI\n      // progress as the page loads & tracing is underway.\n      void resourceModel.navigate(config.navigateToUrl);\n    }\n\n    this.reset();\n    this.setState(State.Recording);\n    this.showRecordingStarted();\n    if (this.statusPane) {\n      this.statusPane.enableAndFocusButton();\n      this.statusPane.updateStatus(i18nString(UIStrings.profiling));\n      this.statusPane.updateProgressBar(i18nString(UIStrings.bufferUsage), 0);\n      this.statusPane.startTimer();\n    }\n    this.hideLandingPage();\n  }\n\n  recordingProgress(usage: number): void {\n    if (this.statusPane) {\n      this.statusPane.updateProgressBar(i18nString(UIStrings.bufferUsage), usage * 100);\n    }\n  }\n\n  private showLandingPage(): void {\n    if (this.landingPage) {\n      this.landingPage.show(this.statusPaneContainer);\n      return;\n    }\n\n    function encloseWithTag(tagName: string, contents: string): HTMLElement {\n      const e = document.createElement(tagName);\n      e.textContent = contents;\n      return e;\n    }\n\n    const learnMoreNode = UI.XLink.XLink.create(\n        'https://developer.chrome.com/docs/devtools/evaluate-performance/', i18nString(UIStrings.learnmore));\n\n    const recordKey = encloseWithTag(\n        'b',\n        UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction('timeline.toggle-recording')[0].title());\n    const reloadKey = encloseWithTag(\n        'b', UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction('timeline.record-reload')[0].title());\n    const navigateNode = encloseWithTag('b', i18nString(UIStrings.wasd));\n\n    this.landingPage = new UI.Widget.VBox();\n    this.landingPage.contentElement.classList.add('timeline-landing-page', 'fill');\n    const centered = this.landingPage.contentElement.createChild('div');\n\n    const recordButton = UI.UIUtils.createInlineButton(UI.Toolbar.Toolbar.createActionButton(this.toggleRecordAction));\n    const reloadButton =\n        UI.UIUtils.createInlineButton(UI.Toolbar.Toolbar.createActionButtonForId('timeline.record-reload'));\n\n    centered.createChild('p').appendChild(i18n.i18n.getFormatLocalizedString(\n        str_, UIStrings.clickTheRecordButtonSOrHitSTo, {PH1: recordButton, PH2: recordKey}));\n\n    centered.createChild('p').appendChild(i18n.i18n.getFormatLocalizedString(\n        str_, UIStrings.clickTheReloadButtonSOrHitSTo, {PH1: reloadButton, PH2: reloadKey}));\n\n    centered.createChild('p').appendChild(i18n.i18n.getFormatLocalizedString(\n        str_, UIStrings.afterRecordingSelectAnAreaOf, {PH1: navigateNode, PH2: learnMoreNode}));\n\n    if (isNode) {\n      const previewSection = new PanelFeedback.PanelFeedback.PanelFeedback();\n      previewSection.data = {\n        feedbackUrl: 'https://bugs.chromium.org/p/chromium/issues/detail?id=1354548' as Platform.DevToolsPath.UrlString,\n        quickStartUrl: 'https://developer.chrome.com/blog/js-profiler-deprecation/' as Platform.DevToolsPath.UrlString,\n        quickStartLinkText: i18nString(UIStrings.learnmore),\n      };\n      centered.appendChild(previewSection);\n      const feedbackButton = new PanelFeedback.FeedbackButton.FeedbackButton();\n      feedbackButton.data = {\n        feedbackUrl: 'https://bugs.chromium.org/p/chromium/issues/detail?id=1354548' as Platform.DevToolsPath.UrlString,\n      };\n      centered.appendChild(feedbackButton);\n    }\n\n    this.landingPage.show(this.statusPaneContainer);\n  }\n\n  private hideLandingPage(): void {\n    this.landingPage.detach();\n  }\n\n  async loadingStarted(): Promise<void> {\n    this.hideLandingPage();\n\n    if (this.statusPane) {\n      this.statusPane.remove();\n    }\n    this.statusPane = new StatusPane(\n        {\n          showProgress: true,\n          showTimer: undefined,\n          buttonDisabled: undefined,\n          buttonText: undefined,\n          description: undefined,\n        },\n        () => this.cancelLoading());\n    this.statusPane.showPane(this.statusPaneContainer);\n    this.statusPane.updateStatus(i18nString(UIStrings.loadingProfile));\n    // FIXME: make loading from backend cancelable as well.\n    if (!this.loader) {\n      this.statusPane.finish();\n    }\n    await this.loadingProgress(0);\n  }\n\n  async loadingProgress(progress?: number): Promise<void> {\n    if (typeof progress === 'number' && this.statusPane) {\n      this.statusPane.updateProgressBar(i18nString(UIStrings.received), progress * 100);\n    }\n  }\n\n  async processingStarted(): Promise<void> {\n    if (this.statusPane) {\n      this.statusPane.updateStatus(i18nString(UIStrings.processingProfile));\n    }\n  }\n\n  updateModelAndFlameChart(): void {\n    if (!this.performanceModel) {\n      return;\n    }\n    this.setModel(this.performanceModel);\n    this.flameChart.updateColorMapper();\n  }\n\n  async loadingComplete(\n      tracingModel: SDK.TracingModel.TracingModel|null,\n      exclusiveFilter: TimelineModel.TimelineModelFilter.TimelineModelFilter|null = null): Promise<void> {\n    this.#traceEngineModel.reset();\n    delete this.loader;\n\n    // If the user just recorded this trace via the record UI, the state will\n    // be StopPending. Whereas if it was an existing trace they loaded via a\n    // file, it will be State.Loading. This means we can tell the recording is\n    // fresh by checking the state value.\n    const recordingIsFresh = this.state === State.StopPending;\n\n    this.setState(State.Idle);\n\n    if (!tracingModel) {\n      this.clear();\n      return;\n    }\n\n    if (!this.performanceModel) {\n      this.performanceModel = new PerformanceModel();\n    }\n\n    try {\n      // Run the new engine in parallel with the parsing done in the performanceModel\n      await Promise.all([\n        this.performanceModel.setTracingModel(tracingModel, recordingIsFresh),\n        this.#executeNewTraceEngine(tracingModel, recordingIsFresh, this.performanceModel.recordStartTime()),\n      ]);\n      const traceParsedData = this.#traceEngineModel.traceParsedData();\n      this.filmStripModel = new SDK.FilmStripModel.FilmStripModel(tracingModel);\n      this.setModel(this.performanceModel, exclusiveFilter, traceParsedData, this.filmStripModel);\n      // This code path is only executed when a new trace is recorded/imported,\n      // so we know that the active index will be the size of the model because\n      // the newest trace will be automatically set to active.\n      this.#traceEngineActiveTraceIndex = this.#traceEngineModel.size() - 1;\n\n      if (this.statusPane) {\n        this.statusPane.remove();\n      }\n      this.statusPane = null;\n\n      if (!this.performanceModel.hasEventListeners(Events.NamesResolved)) {\n        this.performanceModel.addEventListener(Events.NamesResolved, this.updateModelAndFlameChart, this);\n      }\n\n      this.historyManager.addRecording(this.performanceModel, traceParsedData, this.filmStripModel);\n    } catch (error) {\n      this.recordingFailed(error.message);\n      console.error(error);\n    }\n  }\n\n  /**\n   * Call into the new Trace Engine to parse the data. We don't currently do\n   * anything with this data, but we are calling it here to ensure that all the\n   * pieces are connected together and we are able to parse data in the new engine\n   * from OPP.\n   *\n   * The trace engine model runs the parsing in a worker, so this should not\n   * impact the main thread, as we `void` it to ensure we don't want for the\n   * parsing to complete.\n   **/\n  async #executeNewTraceEngine(\n      tracingModel: SDK.TracingModel.TracingModel, isFreshRecording: boolean, recordStartTime?: number): Promise<void> {\n    const shouldGatherMetadata = isFreshRecording && !isNode;\n    const metadata =\n        shouldGatherMetadata ? await SDK.TraceSDKServices.getMetadataForFreshRecording(recordStartTime) : undefined;\n\n    return this.#traceEngineModel.parse(\n        // OPP's data layer uses `EventPayload` as the type to represent raw JSON from the trace.\n        // When we pass this into the new data engine, we need to tell TS to use the new TraceEventData type.\n        tracingModel.allRawEvents() as unknown as TraceEngine.Types.TraceEvents.TraceEventData[],\n        {\n          metadata,\n          isFreshRecording,\n        },\n    );\n  }\n\n  loadingCompleteForTest(): void {\n    // Not implemented, added only for allowing the TimelineTestRunner\n    // to be in sync when a trace load is finished.\n  }\n  private showRecordingStarted(): void {\n    if (this.statusPane) {\n      return;\n    }\n    this.statusPane = new StatusPane(\n        {\n          showTimer: true,\n          showProgress: true,\n          buttonDisabled: true,\n          description: undefined,\n          buttonText: undefined,\n        },\n        () => this.stopRecording());\n    this.statusPane.showPane(this.statusPaneContainer);\n    this.statusPane.updateStatus(i18nString(UIStrings.initializingProfiler));\n  }\n\n  private cancelLoading(): void {\n    if (this.loader) {\n      void this.loader.cancel();\n    }\n  }\n\n  private setMarkers(timelineModel: TimelineModel.TimelineModel.TimelineModelImpl): void {\n    const markers = new Map<number, Element>();\n    const recordTypes = TimelineModel.TimelineModel.RecordType;\n    const zeroTime = timelineModel.minimumRecordTime();\n    for (const event of timelineModel.timeMarkerEvents()) {\n      if (event.name === recordTypes.TimeStamp || event.name === recordTypes.ConsoleTime) {\n        continue;\n      }\n      markers.set(event.startTime, TimelineUIUtils.createEventDivider(event, zeroTime));\n    }\n\n    // Add markers for navigation start times.\n    for (const navStartTimeEvent of timelineModel.navStartTimes().values()) {\n      markers.set(navStartTimeEvent.startTime, TimelineUIUtils.createEventDivider(navStartTimeEvent, zeroTime));\n    }\n    this.overviewPane.setMarkers(markers);\n  }\n\n  private async loadEventFired(\n      event: Common.EventTarget\n          .EventTargetEvent<{resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel, loadTime: number}>):\n      Promise<void> {\n    if (this.state !== State.Recording || !this.recordingPageReload || !this.controller ||\n        this.controller.mainTarget() !== event.data.resourceTreeModel.target()) {\n      return;\n    }\n    const controller = this.controller;\n    await new Promise(r => window.setTimeout(r, this.millisecondsToRecordAfterLoadEvent));\n\n    // Check if we're still in the same recording session.\n    if (controller !== this.controller || this.state !== State.Recording) {\n      return;\n    }\n    void this.stopRecording();\n  }\n\n  private frameForSelection(selection: TimelineSelection): TimelineModel.TimelineFrameModel.TimelineFrame|null {\n    if (TimelineSelection.isFrameObject(selection.object)) {\n      return selection.object;\n    }\n    if (TimelineSelection.isRangeSelection(selection.object) ||\n        TimelineSelection.isNetworkRequestSelection(selection.object)) {\n      return null;\n    }\n    if (TimelineSelection.isTraceEventSelection(selection.object)) {\n      if (!this.performanceModel) {\n        return null;\n      }\n      return this.performanceModel.frameModel().getFramesWithinWindow(selection.endTime, selection.endTime)[0];\n    }\n    console.assert(false, 'Should never be reached');\n    return null;\n  }\n\n  jumpToFrame(offset: number): true|undefined {\n    const currentFrame = this.selection && this.frameForSelection(this.selection);\n    if (!currentFrame || !this.performanceModel) {\n      return;\n    }\n    const frames = this.performanceModel.frames();\n    let index = frames.indexOf(currentFrame);\n    console.assert(index >= 0, 'Can\\'t find current frame in the frame list');\n    index = Platform.NumberUtilities.clamp(index + offset, 0, frames.length - 1);\n    const frame = frames[index];\n    this.revealTimeRange(frame.startTime, frame.endTime);\n    this.select(TimelineSelection.fromFrame(frame));\n    return true;\n  }\n\n  select(selection: TimelineSelection|null): void {\n    this.selection = selection;\n    this.flameChart.setSelection(selection);\n  }\n\n  selectEntryAtTime(events: SDK.TracingModel.Event[]|null, time: number): void {\n    if (!events) {\n      return;\n    }\n    // Find best match, then backtrack to the first visible entry.\n    for (let index = Platform.ArrayUtilities.upperBound(events, time, (time, event) => time - event.startTime) - 1;\n         index >= 0; --index) {\n      const event = events[index];\n      const endTime = event.endTime || event.startTime;\n      if (SDK.TracingModel.TracingModel.isTopLevelEvent(event) && endTime < time) {\n        break;\n      }\n      if (this.performanceModel && this.performanceModel.isVisible(event) && endTime >= time) {\n        this.select(TimelineSelection.fromTraceEvent(event));\n        return;\n      }\n    }\n    this.select(null);\n  }\n\n  highlightEvent(event: SDK.TracingModel.Event|null): void {\n    this.flameChart.highlightEvent(event);\n  }\n\n  private revealTimeRange(startTime: number, endTime: number): void {\n    if (!this.performanceModel) {\n      return;\n    }\n    const window = this.performanceModel.window();\n    let offset = 0;\n    if (window.right < endTime) {\n      offset = endTime - window.right;\n    } else if (window.left > startTime) {\n      offset = startTime - window.left;\n    }\n    this.performanceModel.setWindow({left: window.left + offset, right: window.right + offset}, /* animate */ true);\n  }\n\n  private handleDrop(dataTransfer: DataTransfer): void {\n    const items = dataTransfer.items;\n    if (!items.length) {\n      return;\n    }\n    const item = items[0];\n    Host.userMetrics.actionTaken(Host.UserMetrics.Action.PerfPanelTraceImported);\n    if (item.kind === 'string') {\n      const url = dataTransfer.getData('text/uri-list') as Platform.DevToolsPath.UrlString;\n      if (new Common.ParsedURL.ParsedURL(url).isValid) {\n        void this.loadFromURL(url);\n      }\n    } else if (item.kind === 'file') {\n      const file = items[0].getAsFile();\n      if (!file) {\n        return;\n      }\n      void this.loadFromFile(file);\n    }\n  }\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum State {\n  Idle = 'Idle',\n  StartPending = 'StartPending',\n  Recording = 'Recording',\n  StopPending = 'StopPending',\n  Loading = 'Loading',\n  RecordingFailed = 'RecordingFailed',\n}\n\n// Define row and header height, should be in sync with styles for timeline graphs.\nexport const rowHeight = 18;\n\nexport const headerHeight = 20;\nexport interface TimelineModeViewDelegate {\n  select(selection: TimelineSelection|null): void;\n  selectEntryAtTime(events: SDK.TracingModel.CompatibleTraceEvent[]|null, time: number): void;\n  highlightEvent(event: SDK.TracingModel.CompatibleTraceEvent|null): void;\n}\n\nexport class StatusPane extends UI.Widget.VBox {\n  private status: HTMLElement;\n  private time: Element|undefined;\n  private progressLabel!: Element;\n  private progressBar!: Element;\n  private readonly description: HTMLElement|undefined;\n  private button: HTMLButtonElement;\n  private startTime!: number;\n  private timeUpdateTimer?: number;\n\n  constructor(\n      options: {\n        showTimer?: boolean,\n        showProgress?: boolean,\n        description?: string,\n        buttonText?: string,\n        buttonDisabled?: boolean,\n      },\n      buttonCallback: () => (Promise<void>| void)) {\n    super(true);\n\n    this.contentElement.classList.add('timeline-status-dialog');\n\n    const statusLine = this.contentElement.createChild('div', 'status-dialog-line status');\n    statusLine.createChild('div', 'label').textContent = i18nString(UIStrings.status);\n    this.status = statusLine.createChild('div', 'content');\n    UI.ARIAUtils.markAsStatus(this.status);\n\n    if (options.showTimer) {\n      const timeLine = this.contentElement.createChild('div', 'status-dialog-line time');\n      timeLine.createChild('div', 'label').textContent = i18nString(UIStrings.time);\n      this.time = timeLine.createChild('div', 'content');\n    }\n\n    if (options.showProgress) {\n      const progressLine = this.contentElement.createChild('div', 'status-dialog-line progress');\n      this.progressLabel = progressLine.createChild('div', 'label');\n      this.progressBar = progressLine.createChild('div', 'indicator-container').createChild('div', 'indicator');\n      UI.ARIAUtils.markAsProgressBar(this.progressBar);\n    }\n\n    if (typeof options.description === 'string') {\n      const descriptionLine = this.contentElement.createChild('div', 'status-dialog-line description');\n      descriptionLine.createChild('div', 'label').textContent = i18nString(UIStrings.description);\n      this.description = descriptionLine.createChild('div', 'content');\n      this.description.innerText = options.description;\n    }\n\n    const buttonText = options.buttonText || i18nString(UIStrings.stop);\n    this.button = UI.UIUtils.createTextButton(buttonText, buttonCallback, '', true);\n    // Profiling can't be stopped during initialization.\n    this.button.disabled = !options.buttonDisabled === false;\n    this.contentElement.createChild('div', 'stop-button').appendChild(this.button);\n  }\n\n  finish(): void {\n    this.stopTimer();\n    this.button.disabled = true;\n  }\n\n  remove(): void {\n    (this.element.parentNode as HTMLElement).classList.remove('tinted');\n    this.arrangeDialog((this.element.parentNode as HTMLElement));\n    this.stopTimer();\n    this.element.remove();\n  }\n\n  showPane(parent: Element): void {\n    this.arrangeDialog(parent);\n    this.show(parent);\n    parent.classList.add('tinted');\n  }\n\n  enableAndFocusButton(): void {\n    this.button.disabled = false;\n    this.button.focus();\n  }\n\n  updateStatus(text: string): void {\n    this.status.textContent = text;\n  }\n\n  updateProgressBar(activity: string, percent: number): void {\n    this.progressLabel.textContent = activity;\n    (this.progressBar as HTMLElement).style.width = percent.toFixed(1) + '%';\n    UI.ARIAUtils.setValueNow(this.progressBar, percent);\n    this.updateTimer();\n  }\n\n  startTimer(): void {\n    this.startTime = Date.now();\n    this.timeUpdateTimer = window.setInterval(this.updateTimer.bind(this, false), 1000);\n    this.updateTimer();\n  }\n\n  private stopTimer(): void {\n    if (!this.timeUpdateTimer) {\n      return;\n    }\n    clearInterval(this.timeUpdateTimer);\n    this.updateTimer(true);\n    delete this.timeUpdateTimer;\n  }\n\n  private updateTimer(precise?: boolean): void {\n    this.arrangeDialog((this.element.parentNode as HTMLElement));\n    if (!this.timeUpdateTimer || !this.time) {\n      return;\n    }\n    const elapsed = (Date.now() - this.startTime) / 1000;\n    this.time.textContent = i18nString(UIStrings.ssec, {PH1: elapsed.toFixed(precise ? 1 : 0)});\n  }\n\n  private arrangeDialog(parent: Element): void {\n    const isSmallDialog = parent.clientWidth < 325;\n    this.element.classList.toggle('small-dialog', isSmallDialog);\n    this.contentElement.classList.toggle('small-dialog', isSmallDialog);\n  }\n  override wasShown(): void {\n    super.wasShown();\n    this.registerCSSFiles([timelineStatusDialogStyles]);\n  }\n}\n\nlet loadTimelineHandlerInstance: LoadTimelineHandler;\n\nexport class LoadTimelineHandler implements Common.QueryParamHandler.QueryParamHandler {\n  static instance(opts: {\n    forceNew: boolean|null,\n  } = {forceNew: null}): LoadTimelineHandler {\n    const {forceNew} = opts;\n    if (!loadTimelineHandlerInstance || forceNew) {\n      loadTimelineHandlerInstance = new LoadTimelineHandler();\n    }\n\n    return loadTimelineHandlerInstance;\n  }\n\n  handleQueryParam(value: string): void {\n    void UI.ViewManager.ViewManager.instance().showView('timeline').then(async () => {\n      await TimelinePanel.instance().loadFromURL(window.decodeURIComponent(value) as Platform.DevToolsPath.UrlString);\n    });\n  }\n}\n\nlet actionDelegateInstance: ActionDelegate;\n\nexport class ActionDelegate implements UI.ActionRegistration.ActionDelegate {\n  static instance(opts: {\n    forceNew: boolean|null,\n  }|undefined = {forceNew: null}): ActionDelegate {\n    const {forceNew} = opts;\n    if (!actionDelegateInstance || forceNew) {\n      actionDelegateInstance = new ActionDelegate();\n    }\n\n    return actionDelegateInstance;\n  }\n\n  handleAction(_context: UI.Context.Context, actionId: string): boolean {\n    const panel = (UI.Context.Context.instance().flavor(TimelinePanel) as TimelinePanel);\n    console.assert(panel && panel instanceof TimelinePanel);\n    switch (actionId) {\n      case 'timeline.toggle-recording':\n        void panel.toggleRecording();\n        return true;\n      case 'timeline.record-reload':\n        panel.recordReload();\n        return true;\n      case 'timeline.save-to-file':\n        void panel.saveToFile();\n        return true;\n      case 'timeline.load-from-file':\n        panel.selectFileToLoad();\n        return true;\n      case 'timeline.jump-to-previous-frame':\n        panel.jumpToFrame(-1);\n        return true;\n      case 'timeline.jump-to-next-frame':\n        panel.jumpToFrame(1);\n        return true;\n      case 'timeline.show-history':\n        void panel.showHistory();\n        return true;\n      case 'timeline.previous-recording':\n        panel.navigateHistory(1);\n        return true;\n      case 'timeline.next-recording':\n        panel.navigateHistory(-1);\n        return true;\n    }\n    return false;\n  }\n}\n"]}